import{u as I,_ as T,a as B,b as $}from"./Dd_Izxqx.js";import N from"./xHieza-o.js";import{u as f,i as E,A as L}from"./BMM55Xfq.js";import{u as U,a as q}from"./MPRDzB1v.js";import{d as D,g as j,d9 as z,u as G,c9 as H,da as J,h as K,cC as O,f as m,b as t,w as a,a as n,cF as Q,e as s,i as W,c as X,q as v,V as p,l as Y,o as d,_ as Z}from"./_BmmGIGi.js";import"./E_YhHG9T.js";import"./BU8YHp3p.js";import"./H7YDYKaw.js";import"./CmeLstKH.js";import"./CKS8D1OD.js";import"./BlSCcxsD.js";import"./BJ2h6DUM.js";import"./D5-R3KnC.js";import"./B5L2f44s.js";import"./DWhwHasW.js";import"./CsjIet9h.js";import"./BjIfPQ7A.js";import"./CzFhc0vV.js";import"./D4QhXGu9.js";import"./CyESMgxL.js";import"./DcNhhkuR.js";import"./C4hVFzQI.js";import"./DeSAm6LB.js";import"./D_-Msn7h.js";import"./C7URMWzZ.js";import"./DZ9J1eFE.js";import"./BW1CNIvT.js";import"./DAKP5pNJ.js";import"./BwiW5Nlt.js";import"./cVa1OdO9.js";import"./DxTlZv4G.js";const ee={class:"permissions"},oe={class:"info_container"},se={class:"info_container__buttons"},te={class:"d-flex align-center"},ie={class:"d-flex align-center me-6"},re={key:0,class:"is-manage-mode"},ae={key:1},ne=D({__name:"index",setup(de){const S=j(),u=f(),g=U(),h=z(),x=q(),A=G(),C=E(),{selectedFundSlug:P}=H(f()),o=J().fund,{roles:_,selectedRole:c,isEditDisabled:r,isFetchingPermissions:R,fetchPermissions:y}=I(o.chainId,o.address),k=K(()=>R.value||C.isActionState("fetchRoleModAddressAddressAction",L.Loading)),w=async()=>{if(!(o!=null&&o.address)){_.value=[];return}try{const i=await u.fetchRoleModAddress(o.address);await y(i)}catch(i){console.error(i),A.errorToast("Failed loading permissions. Please refresh page.")}},V=async()=>{try{g.rawTransactions=await x.updateRole(o.chainId)}catch(i){console.error("Failed updating role",i)}S.push(`/details/${P.value}/governance/delegated-permissions`)};return O(()=>[o.chainShort,u.fetchRoleModAddress],()=>{w()},{immediate:!0}),(i,e)=>{const b=Y("Icon"),F=$,M=N;return d(),m("div",ee,[t(M,{class:"permissions__content"},{default:a(()=>[n("div",oe,[n("div",se,[n("div",te,[n("div",ie,[t(T,{modelValue:s(c),"onUpdate:modelValue":e[0]||(e[0]=l=>W(c)?c.value=l:null),roles:s(_)},null,8,["modelValue","roles"])]),t(B,{disabled:s(r)},null,8,["disabled"])]),s(h).isManageMode?(d(),m("div",re,[s(r)?(d(),X(p,{key:0,color:"primary",onClick:e[1]||(e[1]=l=>r.value=!1)},{default:a(()=>e[3]||(e[3]=[v(" Edit ")])),_:1})):(d(),m("div",ae,[t(p,{color:"primary",onClick:V},{default:a(()=>e[4]||(e[4]=[v(" Create Permissions Proposal ")])),_:1}),t(p,{variant:"text",color:"secondary",onClick:e[2]||(e[2]=l=>r.value=!0)},{default:a(()=>[t(b,{icon:"ic:twotone-cancel",width:"1.5rem"})]),_:1})]))])):Q("",!0)])]),t(F,{class:"mt-6","chain-id":s(o).chainId,disabled:s(r),"is-loading":s(k)},null,8,["chain-id","disabled","is-loading"])]),_:1})])}}}),qe=Z(ne,[["__scopeId","data-v-ff424529"]]);export{qe as default};
