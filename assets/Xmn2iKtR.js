import{_ as X}from"./nuwz1RT2.js";import tt from"./DpsThwoF.js";import et from"./C3wRWmyj.js";import{_ as j}from"./BO2uj0d2.js";import nt from"./CzFhc0vV.js";import{A as U,u as B,i as q}from"./BMM55Xfq.js";import{d as H,c9 as O,_ as Y,f as c,cu as k,cY as Z,b as r,c as _,w as i,q as b,o as s,cZ as at,d9 as ot,da as st,h as p,a as o,e as t,c8 as z,cF as T,V as R,z as dt,cx as rt}from"./_BmmGIGi.js";import{V as x}from"./DtO3A6PH.js";import{V as it}from"./E_YhHG9T.js";import"./DRw30qtb.js";import"./CmEKxddJ.js";import"./B1b9GBsg.js";import"./BwiW5Nlt.js";import"./cVa1OdO9.js";import"./CKS8D1OD.js";import"./H7YDYKaw.js";import"./DNTpA6f4.js";import"./BSRo00oN.js";import"./D0LsXpOS.js";import"./D_-Msn7h.js";import"./BlSCcxsD.js";import"./BJ2h6DUM.js";import"./D5-R3KnC.js";import"./B5L2f44s.js";import"./C7URMWzZ.js";import"./DcNhhkuR.js";import"./CsjIet9h.js";import"./C4hVFzQI.js";import"./DeSAm6LB.js";import"./Cx6b7hxJ.js";import"./BWHNz5Ry.js";import"./DpICAjib.js";import"./B9vFmp28.js";import"./D4QhXGu9.js";import"./DxTlZv4G.js";const ct=H({name:"NAVUpdates",props:{fund:{type:Object,default:()=>{}}},setup(){const n=B(),e=q(),{getFormattedBaseTokenValue:u}=O(n);return{fundStore:n,actionStateStore:e,getFormattedBaseTokenValue:u}},computed:{isLoadingFetchFundNAVUpdatesActionState(){return this.actionStateStore.isActionState("fetchFundNAVDataAction",U.Loading)}},methods:{navUpdateTotalNav(n){var e,u;return(e=n.navParts)!=null&&e.totalNAV?this.getFormattedBaseTokenValue((u=n.navParts)==null?void 0:u.totalNAV):"N/A"}}}),ut={class:"details main_grid main_grid--full-width"};function lt(n,e,u,g,V,f){var d;const v=j,S=nt;return s(),c("div",ut,[n.isLoadingFetchFundNAVUpdatesActionState?(s(),c(k,{key:0},Z(3,l=>r(x,{key:l,type:"list-item"})),64)):((d=n.fund.navUpdates)==null?void 0:d.length)>0?(s(!0),c(k,{key:1},Z(n.fund.navUpdates,(l,y)=>(s(),_(S,{key:y,title:l.date,"grow-column1":!0,title2:n.navUpdateTotalNav(l),"grow-column2":!0,"no-body-padding":"","bg-transparent":""},{body:i(()=>{var h,A,N;return[r(v,{"fund-chain-id":n.fundStore.selectedFundChain,"fund-address":n.fundStore.fundAddress,"fund-contract-base-token-balance":Number((h=n.fundStore.fund)==null?void 0:h.fundContractBaseTokenBalance),"safe-contract-base-token-balance":Number((A=n.fundStore.fund)==null?void 0:A.safeContractBaseTokenBalance),"fee-balance":Number((N=n.fundStore.fund)==null?void 0:N.feeBalance),methods:l.entries,idx:"navUpdates"},null,8,["fund-chain-id","fund-address","fund-contract-base-token-balance","safe-contract-base-token-balance","fee-balance","methods"])]}),_:2},1032,["title","title2"]))),128)):(s(),c(k,{key:2},[b(" There are currently no NAV updates. ")],64))])}const mt=Y(ct,[["render",lt]]),pt={class:"nav"},ft={class:"main_header__title"},_t={class:"main_header__subtitle"},bt={key:1,class:"ms-2"},vt={class:"button_container"},ht={key:1,class:"tooltip-wrapper"},At={class:"main_card"},Nt={class:"methods main_grid main_grid--full-width main_grid--no-gap"},kt={class:"main_card"},gt=H({__name:"index",setup(n){const e=B(),u=at(),g=q(),V=ot(),f=st().fund,{isUsingZodiacPilotExtension:v,selectedFundSlug:S,fundLastNAVUpdate:d,fundLastNAVUpdateMethods:l}=O(B()),y=p(()=>{var m;return(m=d==null?void 0:d.value)!=null&&m.date?d.value.date??"N/A":"N/A"}),h=p(()=>{var m;return(m=d==null?void 0:d.value)!=null&&m.date?l.value||[]:e.fundInitialNAVMethods||[]}),A=p(()=>e.fundTotalNAV?e.getFormattedBaseTokenValue(e.fundTotalNAV):"N/A"),N=p(()=>f.navUpdates?{...f,navUpdates:f.navUpdates.slice().reverse()}:f),w=p(()=>g.isActionState("postUpdateNAVAction",U.Loading)),F=p(()=>g.isActionState("fetchFundNAVDataAction",U.Loading));return(m,a)=>{var M,L,$,P,D,E,I;const G=X,C=tt,J=et,K=j,Q=mt;return s(),c("div",pt,[r(C,null,{default:i(()=>[o("div",null,[o("div",ft,[t(F)?(s(),_(x,{key:0,type:"text",class:"total_nav_skeleton"})):(s(),c(k,{key:1},[b(z(t(A)),1)],64))]),o("div",_t,[a[1]||(a[1]=o("div",null," Last updated on ",-1)),t(F)?(s(),_(x,{key:0,type:"text",class:"last_nav_update_skeleton"})):(s(),c("strong",bt,z(t(y)),1))])]),o("div",vt,[t(V).isManageMode?(s(),_(G,{key:0,to:`/details/${t(S)}/nav/manage`},{default:i(()=>[r(R,{class:"text-secondary",variant:"outlined"},{default:i(()=>a[2]||(a[2]=[b(" Manage NAV Methods ")])),_:1})]),_:1},8,["to"])):T("",!0),t(V).isManageMode?(s(),c("div",ht,[r(it,{activator:"parent",location:"bottom",disabled:t(v)},{activator:i(({props:W})=>[r(R,dt(W,{disabled:!t(v)||t(w),class:"bg-primary text-secondary",onClick:a[0]||(a[0]=Vt=>t(u).isConnected?t(e).postUpdateNAV():null)}),{prepend:i(()=>[t(w)?(s(),_(rt,{key:0,class:"d-flex",size:"20",width:"3",indeterminate:""})):T("",!0)]),default:i(()=>[a[3]||(a[3]=b(" Update NAV "))]),_:2},1040,["disabled"])]),default:i(()=>a[4]||(a[4]=[b(" Switch to the Zodiac Pilot Extension to Update NAV. ")])),_:1},8,["disabled"])])):T("",!0)])]),_:1}),o("div",At,[r(C,null,{default:i(()=>[o("div",null,[a[5]||(a[5]=o("div",{class:"subtitle_white mb-4"}," NAV Methods ",-1)),o("div",null,[r(J,{info:"Learn more about NAV methods",icon:!0,link:"https://docs.rethink.finance/rethink.finance/protocol/architecture/nav-calculator-contract"})])])]),_:1}),o("div",Nt,[r(K,{"fund-chain-id":t(e).selectedFundChain,"fund-address":t(e).fundAddress,"fund-contract-base-token-balance":Number((M=t(e).fund)==null?void 0:M.fundContractBaseTokenBalance),"safe-contract-base-token-balance":Number((L=t(e).fund)==null?void 0:L.safeContractBaseTokenBalance),"fee-balance":Number(($=t(e).fund)==null?void 0:$.feeBalance),"safe-address":(P=t(e).fund)==null?void 0:P.safeAddress,"base-symbol":(D=t(e).fund)==null?void 0:D.baseToken.symbol,"base-decimals":(E=t(e).fund)==null?void 0:E.baseToken.decimals,methods:t(h),loading:t(F),"nav-parts":(I=t(d))==null?void 0:I.navParts,"show-summary-row":"","show-last-nav-update-value":"","show-base-token-balances":"","show-simulated-nav":"",idx:"fundSlug/nav/index"},null,8,["fund-chain-id","fund-address","fund-contract-base-token-balance","safe-contract-base-token-balance","fee-balance","safe-address","base-symbol","base-decimals","methods","loading","nav-parts"])])]),o("div",kt,[a[6]||(a[6]=o("div",{class:"subtitle_white mb-4"}," NAV Updates ",-1)),o("div",null,[r(Q,{fund:t(N)},null,8,["fund"])])])])}}}),se=Y(gt,[["__scopeId","data-v-b2c213bc"]]);export{se as default};
