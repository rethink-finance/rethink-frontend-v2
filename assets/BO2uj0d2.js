import{u as z}from"./BMM55Xfq.js";import{V as P}from"./E_YhHG9T.js";import{d as G,c as f,w as a,b as o,l as K,z as R,e as Y,o as n,d5 as w,d6 as I,k as Z,t as ee,r as _,u as te,h as ae,_ as se,f as h,cF as N,a as m,c8 as v,d4 as U,q as r,cu as A,G as F,cY as oe,Q as J,V as $,cx as O}from"./_BmmGIGi.js";import ie from"./DRw30qtb.js";import{_ as ne}from"./CmEKxddJ.js";import le from"./H7YDYKaw.js";import de from"./B1b9GBsg.js";import re from"./DNTpA6f4.js";import ue from"./BSRo00oN.js";import{_ as pe}from"./D0LsXpOS.js";import{d as he}from"./cVa1OdO9.js";import{m as me,P as T,l as S,o as ye,f as j,n as fe,k as ve,j as ce,V as Ne,i as ge}from"./BwiW5Nlt.js";import{f as Te}from"./CKS8D1OD.js";import{V as Ve}from"./DtO3A6PH.js";import{a as X}from"./BWHNz5Ry.js";import{V as ke}from"./DpICAjib.js";import{V as B}from"./D_-Msn7h.js";import{b as D}from"./BlSCcxsD.js";import{b as x}from"./D5-R3KnC.js";import{V as M}from"./B9vFmp28.js";import{V as Se,a as Ee,b as Be,c as be}from"./D4QhXGu9.js";import{V as Ae}from"./DcNhhkuR.js";const Ce=G({__name:"SimulateButton",setup(e){const t=z();return(s,u)=>{const p=K("Icon");return n(),f(P,{text:"Refresh Simulated NAV",location:"top"},{activator:a(({props:y})=>[o(p,R({icon:"mdi-update",class:"icon"},y,{onClick:u[0]||(u[0]=V=>Y(t).refreshSimulateNAVCounter+=1)}),null,16)]),_:1})}}}),we=G({name:"FundNavMethodsTable",props:{methods:{type:Array,default:()=>[]},usedMethods:{type:Array,default:()=>[]},navParts:{type:Object,default:()=>{}},showBaseTokenBalances:{type:Boolean,default:!1},showSafeContractBalance:{type:Boolean,default:!1},showSummaryRow:{type:Boolean,default:!1},showLastNavUpdateValue:{type:Boolean,default:!1},showSimulatedNav:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},idx:{type:String,default:""},search:{type:String,default:""},fundAddress:{type:String,default:""},baseDecimals:{type:Number,default:-1},baseSymbol:{type:String,default:""},fundChainId:{type:String,default:""},safeAddress:{type:String,default:""},isFundNonInit:{type:Boolean,default:!1},fundFactoryContractV2Used:{type:Boolean,default:!1},fundContractBaseTokenBalance:{type:Number,default:0},safeContractBaseTokenBalance:{type:Number,default:0},feeBalance:{type:Number,default:0}},emits:["update:methods","selectedChanged"],setup(){const e=z();return{toastStore:te(),fundStore:e,creatablePositionTypes:ae(()=>ge.filter(s=>s.key!==T.NFT)),PositionType:T}},data(){return{expanded:[],selected:[],expandedBaseAssets:[],isNavSimulationLoading:!1,form:_(null),formIsValid:_(!1),originalNavEntry:_({positionName:"",valuationSource:"",positionType:T.Liquid,valuationType:S.DEXPair,details:{liquid:[],illiquid:[],nft:[],composable:[]},detailsJson:"{}"}),navEntry:_({positionName:"",valuationSource:"",positionType:T.Liquid,valuationType:S.DEXPair,details:{liquid:[],illiquid:[],nft:[],composable:[]},detailsJson:"{}"}),rules:[Te.required],expandedPanels:_([0])}},computed:{headers(){const e=[{title:"#",key:"index",sortable:!1},{title:"Position Name",key:"positionName",sortable:!1},{title:"Valuation Source",key:"valuationSource",sortable:!1},{title:"Position Type",key:"positionType",sortable:!1}];return this.showLastNavUpdateValue&&e.push({title:"Last NAV Update Value",key:"pastNavValue",align:"end",sortable:!1,width:"160px"}),this.showSimulatedNav&&e.push({title:"Simulated NAV",key:"simulatedNavFormatted",align:"end",sortable:!1,width:"160px"}),e.push({key:"data-table-expand",sortable:!1,align:"center"}),this.deletable&&e.push({key:"delete",sortable:!1,align:"center",width:"40px"}),this.selectable&&e.push({key:"data-table-select",sortable:!1,align:"center",width:"40px"}),e},parsedPositionTypeItems(){return this.creatablePositionTypes.map(e=>({key:e.key,label:e.name,onClick:()=>this.resetMethods(!0)}))},parsedValuationTypeItems(){return this.valuationTypes.map(e=>({key:e.key,label:e.name,onClick:()=>this.resetMethods()}))},valuationTypes(){var e,t;return((t=ce[(e=this.navEntry)==null?void 0:e.positionType])==null?void 0:t.map(s=>Ne[s]))||[]},defaultFields(){return ve[this.navEntry.positionType][this.navEntry.valuationType||"undefined"]||[]},usedMethodHashes(){return this.usedMethods.map(e=>e.detailsHash||"")},formattedTotalSimulatedNAV(){const e=(this.totalNavMethodsSimulatedNAV||0n)+(BigInt(this.fundContractBaseTokenBalance)||0n)+(BigInt(this.safeContractBaseTokenBalance)||0n)+(BigInt(this.feeBalance)||0n);return this.fundStore.getFormattedBaseTokenValue(e,!0,!1,this.baseSymbol,this.baseDecimals)},formattedTotalLastNAV(){var e;return this.fundStore.getFormattedBaseTokenValue(((e=this.navParts)==null?void 0:e.totalNAV)||0n,!0,!1,this.baseSymbol,this.baseDecimals)},totalNavMethodsSimulatedNAV(){return this.methods.reduce((e,t)=>{const s=t.deleted?0n:t.simulatedNav||0n;return e+s},0n)},formattedFundContractBaseTokenBalance(){return this.fundStore.getFormattedBaseTokenValue(BigInt(this.fundContractBaseTokenBalance),!0,!1,this.baseSymbol,this.baseDecimals)},formattedSafeContractBaseTokenBalance(){return this.fundStore.getFormattedBaseTokenValue(BigInt(this.safeContractBaseTokenBalance),!0,!1,this.baseSymbol,this.baseDecimals)},formattedFeeBalance(){return this.fundStore.getFormattedBaseTokenValue(BigInt(this.feeBalance),!0,!1,this.baseSymbol,this.baseDecimals)},simulatedNavErrorCount(){var e,t;return((t=(e=this.methods)==null?void 0:e.filter(s=>s.isSimulatedNavError))==null?void 0:t.length)||0},groupedMethods(){const e=this.computedMethods.filter(p=>p.isRethinkPosition),t=this.computedMethods.filter(p=>!p.isRethinkPosition),s=(BigInt(this.fundContractBaseTokenBalance)||0n)+(BigInt(this.safeContractBaseTokenBalance)||0n)+(BigInt(this.feeBalance)||0n),u=this.fundStore.getFormattedBaseTokenValue(s,!0,!1,this.baseSymbol,this.baseDecimals);return e.length?[{positionName:"Base Assets",valuationSource:"rethink.finance",positionType:T.Liquid,pastNavValue:e.reduce((y,V)=>y+BigInt(V.pastNavValue||0),BigInt(0)),simulatedNavFormatted:u,detailsJson:e,isGroupedBaseAssets:!0,isRethinkPosition:!0},...t]:t},computedMethods(){var t,s,u,p;const e=[];return this.showBaseTokenBalances?(e.push({positionName:"Admin Contract Balance",valuationSource:"rethink.finance",positionType:T.Liquid,pastNavValue:(t=this.navParts)==null?void 0:t.baseAssetOIVBal,simulatedNavFormatted:this.formattedFundContractBaseTokenBalance,isRethinkPosition:!0,detailsHash:"-1",detailsJson:{fundContractAddress:this.fundAddress??""}}),e.push({positionName:"Safe Balance",valuationSource:"rethink.finance",positionType:T.Liquid,pastNavValue:(s=this.navParts)==null?void 0:s.baseAssetSafeBal,simulatedNavFormatted:this.formattedSafeContractBaseTokenBalance,isRethinkPosition:!0,detailsHash:"-2",detailsJson:{safeContractAddress:this.safeAddress??""}}),e.push({positionName:"Fees Balance",valuationSource:"rethink.finance",positionType:T.Liquid,pastNavValue:(u=this.navParts)==null?void 0:u.feeBal,simulatedNavFormatted:this.formattedFeeBalance,isRethinkPosition:!0,detailsHash:"-3"})):this.showSafeContractBalance&&e.push({positionName:"Safe Balance",valuationSource:"rethink.finance",positionType:T.Liquid,pastNavValue:(p=this.navParts)==null?void 0:p.baseAssetSafeBal,simulatedNavFormatted:this.formattedSafeContractBaseTokenBalance,isRethinkPosition:!0,detailsHash:"-2",detailsJson:{safeContractAddress:this.safeAddress??""}}),[...e,...this.methods.map(y=>({...y,isAlreadyUsed:this.isMethodAlreadyUsed(y.detailsHash)}))]}},watch:{"methods.length":{handler(e,t){!this.methods.length||t===e||this.simulateNAV()},deep:!0,immediate:!0},"fundStore.refreshSimulateNAVCounter":{handler(){this.simulateNAV()}}},methods:{onExpandedUpdate(e){this.expanded=e.length?[e[e.length-1]]:[]},onExpandedBaseAssetsUpdate(e){this.expandedBaseAssets=e.length?[e[e.length-1]]:[]},onRowClick(e,t){const s=(t==null?void 0:t.item)||void 0;s&&this.setNavEntry(s)},copyText(e){const t=e;navigator.clipboard.writeText(t)},async simulateNAV(){const e=this.fundChainId,t=this.fundAddress;if(!this.showSimulatedNav||this.isNavSimulationLoading||!e||!t)return;this.isNavSimulationLoading=!0;const s=[];for(const u of this.methods)s.push(this.fundStore.fetchSimulatedNAVMethodValue(e,t,this.safeAddress,this.baseDecimals,this.baseSymbol,u,this.isFundNonInit,this.fundFactoryContractV2Used));await Promise.allSettled(s),this.isNavSimulationLoading=!1},simulatedNAVIconColor(e){return e.foundMatchingPastNAVUpdateEntryFundAddress?"":"var(--color-warning)"},isMethodEditable(e){return(this.idx==="nav/manage/index"||this.idx==="nav/onboarding")&&!this.isBaseTokenBalanceMethod(e)},isBaseTokenBalanceMethod(e){return["Admin Contract Balance","Safe Balance","Fees Balance"].includes(e.positionName)&&e.valuationSource==="Rethink"},deleteMethod(e,t=!0,s){const u=[...this.methods];for(let p=0;p<u.length;p++){const y=u[p];y.detailsHash===e.detailsHash&&(y.isNew?(y.isNew=!1,y.deleted=!1,u.splice(p,1),p--):u[p].deleted=t?!y.deleted:!0)}s?this.$emit("update:methods",[...u,s]):this.$emit("update:methods",u)},deleteEditMethod(e){this.navEntry.details[this.navEntry.positionType].splice(e,1)},addEditMethodDetails(){var e,t;this.navEntry.details[this.navEntry.positionType].push(this.getNewMethodDetails((e=this.navEntry)==null?void 0:e.positionType,(t=this.navEntry)==null?void 0:t.valuationType))},resetMethods(e=!1){var u,p,y,V,g,E;let t=(u=this.navEntry)==null?void 0:u.valuationType;if(e&&(t=this.defineValuationType(this.navEntry)),t===((p=this.originalNavEntry)==null?void 0:p.valuationType)){this.setNavEntry(this.originalNavEntry);return}const s={positionName:(y=this.navEntry)==null?void 0:y.positionName,valuationSource:(V=this.navEntry)==null?void 0:V.valuationSource,positionType:(g=this.navEntry)==null?void 0:g.positionType,valuationType:t,details:{},detailsJson:"{}"};for(const k of fe)s.details[k]=[];s.details[this.navEntry.positionType].push(this.getNewMethodDetails((E=this.navEntry)==null?void 0:E.positionType,t)),s.detailsJson=j(s.details),this.navEntry=s},editMethod(){try{if(!this.formIsValid)return this.toastStore.warningToast("Some form fields are not valid.");const e=JSON.parse(JSON.stringify(this.navEntry,w),I);if(!this.hasChanged())return this.toastStore.warningToast("No changes detected.");e.pastNAVUpdateEntryFundAddress=0,e.details.isPastNAVUpdate=!1,e.details.pastNAVUpdateIndex=0,e.details.pastNAVUpdateEntryIndex=0,e.details.entryType=ye[this.navEntry.positionType],e.details.valuationType=this.navEntry.valuationType,e.details.description=JSON.stringify({positionName:this.navEntry.positionName,valuationSource:this.navEntry.valuationSource});for(const t of e.details[e.positionType]){if(this.defaultFields.forEach(s=>{s.key in t||(t[s.key]=s.value)}),"pastNAVUpdateIndex"in t&&(e.details.pastNAVUpdateIndex=t.pastNAVUpdateIndex),"otcTxHashes"in t)try{t.otcTxHashes=t.otcTxHashes.split(",").map(s=>s.trim()).filter(s=>s!=="")||[]}catch{return this.toastStore.errorToast("Something went wrong parsing the comma-separated list of TX hashes.")}e.positionType===T.Liquid&&e.valuationType===S.DEXPair&&(t.nonAssetTokenAddress=""),delete t.isValid,delete t.valuationType}e.isNew=!0,delete e.details.valuationType,delete e.deleted,e.detailsJson=j(e.details),e.detailsHash=Z(ee(e.detailsJson)),this.hasChanged()&&this.deleteMethod(this.originalNavEntry,!1,e),this.toastStore.addToast("Method added successfully.")}catch(e){console.error("Error editing method: ",e),this.toastStore.errorToast("Error editing method.")}},setNavEntry(e){const t=this.defineValuationType(e);this.navEntry=JSON.parse(JSON.stringify(e,w),I),this.navEntry.detailsJson=JSON.stringify(this.navEntry.details,null,2),this.originalNavEntry=JSON.parse(JSON.stringify(e,w),I),this.originalNavEntry.detailsJson=JSON.stringify(this.originalNavEntry.details,null,2),t&&(this.navEntry.valuationType=t,this.originalNavEntry.valuationType=t)},hasChanged(){const e=JSON.parse(JSON.stringify(this.navEntry,w),I);for(const u of e.details[e.positionType])delete u.isValid;const t=JSON.stringify(this.originalNavEntry,w),s=JSON.stringify(e,w);return t!==s},defineValuationType(e){var t,s,u,p,y,V,g,E;switch(e.positionType){case T.Liquid:{const k=(u=(s=(t=e==null?void 0:e.details)==null?void 0:t.liquid)==null?void 0:s[0])==null?void 0:u.tokenPair,C=(V=(y=(p=e==null?void 0:e.details)==null?void 0:p.liquid)==null?void 0:y[0])==null?void 0:V.aggregatorAddress;return k?S.DEXPair:C?S.Aggregator:S.DEXPair}case T.Illiquid:{const k=(E=(g=e==null?void 0:e.details)==null?void 0:g.illiquid[0])==null?void 0:E.nftType;return k==="ERC-721"?S.ERC721:k==="ERC-1155"?S.ERC1155:S.ERC20}default:return}},methodProps(e){var s;const t={class:""};return e.item.deleted?t.class+=" tr_delete_method":e.item.isNew&&(t.class+=" tr_is_new_method"),this.isMethodAlreadyUsed((s=e.item)==null?void 0:s.detailsHash)&&(t.class+=" tr_method_already_used"),t},onSelectionChanged(){this.$emit("selectedChanged",this.selected.filter(e=>!this.isMethodAlreadyUsed(e)))},isMethodAlreadyUsed(e){return this.usedMethodHashes.includes(e||"")},getNewMethodDetails(e,t){const s={isValid:!1};return(me[e][t||"undefined"]||[]).forEach(p=>{s[p.key]=he[p.type]}),s}}}),Me={key:0,class:"text-right"},Pe={class:"d-flex"},_e={key:0,class:"bottom"},Ue={class:"text-right"},Fe={key:0,class:"ms-2 justify-center align-center d-flex"},Ie={class:"td_index"},De={key:0},Je={key:1},Re={key:2,class:"ms-2 justify-center align-center d-flex"},Le={key:0},qe={key:1},He={key:2,class:"ms-2 justify-center align-center d-flex"},$e={key:0},Oe={key:0,class:"tr_row_expanded"},je=["colspan"],Xe={class:"text-right"},xe={class:"text-right"},ze={class:"td_index"},Ge={key:0,class:"tr_row_expanded"},Ke=["colspan"],Qe={class:"nav_entries__json"},We=["colspan"],Ye={class:"nav_entries__details"},Ze=["onClick"],et={class:"method_details_title"},tt={class:"me-1"},at={key:2,class:"nav_entries__json"},st={key:2,class:"nav_entries__no_data"};function ot(e,t,s,u,p,y){const V=Ce,g=K("Icon"),E=ie,k=ne,C=le,L=de,Q=re,q=ue,H=pe;return e.loading?(n(),f(Ve,{key:0,type:"table"})):e.groupedMethods.length?(n(),f(X,{key:1,modelValue:e.selected,"onUpdate:modelValue":t[10]||(t[10]=d=>e.selected=d),expanded:e.expanded,"onUpdate:expanded":[t[11]||(t[11]=d=>e.expanded=d),e.onExpandedUpdate],headers:e.headers,items:e.groupedMethods,"cell-props":e.methodProps,class:"main_table nav_entries","show-expand":"",search:e.search,"expand-on-click":"","item-value":"detailsHash","show-select":e.selectable,"items-per-page":"-1",onInput:e.onSelectionChanged,"onClick:row":e.onRowClick},{"header.pastNavValue":a(()=>[t[12]||(t[12]=r(" Last NAV Update ")),e.showSummaryRow&&e.showLastNavUpdateValue?(n(),h("div",Me,v(e.formattedTotalLastNAV),1)):N("",!0)]),"header.simulatedNavFormatted":a(()=>[m("th",null,[m("div",Pe,[t[13]||(t[13]=r(" Simulated NAV ")),o(V,{class:"ms-1"})]),e.showSummaryRow&&e.showSimulatedNav?(n(),h("div",_e,[m("div",Ue,[r(v(e.formattedTotalSimulatedNAV)+" ",1),e.simulatedNavErrorCount>0?(n(),h("div",Fe,[o(g,{icon:"octicon:question-16",width:"1rem","font-bold":"",color:"var(--color-danger)"}),o(P,{activator:"parent",location:"bottom"},{default:a(()=>t[14]||(t[14]=[r(" Total value may not include all simulated NAV method values."),m("br",null,null,-1),r(" Retry simulating NAV. ")])),_:1})])):N("",!0)])])):N("",!0)])]),"item.index":a(({index:d})=>[m("strong",Ie,v(d+1),1)]),"item.positionName":a(({value:d})=>[r(v(d??"N/A"),1)]),"item.valuationSource":a(({value:d,item:l})=>[l.isRethinkPosition?(n(),f(E,{key:0,small:""})):(n(),h(A,{key:1},[r(v(d??"N/A"),1)],64))]),"item.positionType":a(({item:d})=>[o(k,{value:d.displayPositionType||d.positionType,disabled:d.deleted||d.isAlreadyUsed},null,8,["value","disabled"])]),"item.pastNavValue":a(({value:d,item:l})=>[m("div",{class:F(`item-simulated-nav ${l.pastNavValueError?"item-simulated-nav--error":""}`)},[l.pastNavValueLoading?(n(),h("div",De,[o(O,{indeterminate:"",color:"gray",size:"16",width:"2"})])):(n(),h("div",Je,v(d?e.fundStore.getFormattedBaseTokenValue(d):"-"),1)),l.pastNavValueError?(n(),h("div",Re,[o(g,{icon:"octicon:question-16",width:"1rem"}),o(P,{activator:"parent",location:"right"},{default:a(()=>t[15]||(t[15]=[r(" Something went wrong while getting the last NAV value. ")])),_:1})])):N("",!0)],2)]),"item.simulatedNavFormatted":a(({value:d,item:l})=>[m("div",{class:F(`item-simulated-nav ${l.isSimulatedNavError?"item-simulated-nav--error":""}`)},[l.isNavSimulationLoading?(n(),h("div",Le,[o(O,{indeterminate:"",color:"gray",size:"16",width:"2"})])):(n(),h("div",qe,v(d??"-"),1)),l.pastNAVUpdateEntryFundAddress||l.isSimulatedNavError?(n(),h("div",He,[o(P,{activator:"parent",location:"right"},{default:a(()=>[l.isSimulatedNavError?(n(),h(A,{key:0},[r(" Something went wrong while simulating NAV value. Retry simulating NAV. ")],64)):(n(),h(A,{key:1},[t[16]||(t[16]=r(" pastNAVUpdateEntryFundAddress: ")),t[17]||(t[17]=m("br",null,null,-1)),t[18]||(t[18]=r()),m("strong",null,v(l.pastNAVUpdateEntryFundAddress),1)],64))]),_:2},1024)])):N("",!0)],2)]),"item.data-table-expand":a(({item:d,internalItem:l,isExpanded:i,toggleExpand:c})=>[d.detailsJson?(n(),f(C,{key:0,text:e.isBaseTokenBalanceMethod(d)?"Raw":"Details",active:i(l),disabled:d.deleted||d.isAlreadyUsed,onClick:[U(b=>c(l),["stop"]),b=>e.isBaseTokenBalanceMethod(d)?null:e.setNavEntry(d)]},null,8,["text","active","disabled","onClick"])):N("",!0)]),"item.data-table-select":a(({item:d,internalItem:l,isSelected:i,toggleSelect:c})=>[d.isAlreadyUsed?(n(),h("div",$e,[o(L,{value:"In Use",disabled:d.isAlreadyUsed},null,8,["disabled"])])):(n(),f(Ae,{key:1,"model-value":i(l),onClick:U(b=>c(l),["stop"])},null,8,["model-value","onClick"]))]),"item.delete":a(({item:d})=>[d.isRethinkPosition?N("",!0):(n(),f(C,{key:0,small:"",onClick:U(l=>e.deleteMethod(d),["stop"])},{default:a(()=>[d.deleted?(n(),f(P,{key:0,activator:"parent",location:"bottom"},{default:a(()=>t[19]||(t[19]=[r(" Undo Delete ")])),activator:a(({props:l})=>[o(J,R({icon:"mdi-arrow-u-left-top",color:"secondary"},l),null,16)]),_:1})):(n(),f(P,{key:1,activator:"parent",location:"bottom"},{default:a(()=>t[20]||(t[20]=[r(" Delete NAV Method ")])),activator:a(({props:l})=>[o(J,R({icon:"mdi-delete-outline",color:"error"},l),null,16)]),_:1}))]),_:2},1032,["onClick"]))]),"expanded-row":a(({columns:d,item:l})=>[l.isGroupedBaseAssets?(n(),h("tr",Oe,[m("td",{colspan:d.length},[o(X,{expanded:e.expandedBaseAssets,"onUpdate:expanded":[t[0]||(t[0]=i=>e.expandedBaseAssets=i),e.onExpandedBaseAssetsUpdate],items:l.detailsJson,headers:e.headers,"show-expand":"","item-value":"detailsHash","hide-default-footer":!0},{"header.pastNavValue":a(()=>[t[21]||(t[21]=r(" Last NAV Update ")),m("div",Xe,v(e.fundStore.getFormattedBaseTokenValue(l.pastNavValue||0n,!0,!1,e.baseSymbol,e.baseDecimals)),1)]),"header.simulatedNavFormatted":a(()=>[t[22]||(t[22]=r(" Simulated NAV ")),m("div",xe,v(l.simulatedNavFormatted),1)]),"item.index":a(({index:i})=>[m("strong",ze,"1."+v(i+1),1)]),"item.valuationSource":a(({value:i,item:c})=>[c.isRethinkPosition?(n(),f(E,{key:0,small:""})):(n(),h(A,{key:1},[r(v(i??"N/A"),1)],64))]),"item.pastNavValue":a(({value:i})=>[r(v(e.fundStore.getFormattedBaseTokenValue(i)),1)]),"item.positionType":a(({item:i})=>[o(k,{value:i.displayPositionType||i.positionType,disabled:i.deleted||i.isAlreadyUsed},null,8,["value","disabled"])]),"item.data-table-expand":a(({item:i,internalItem:c,isExpanded:b,toggleExpand:W})=>[i.detailsJson?(n(),f(C,{key:0,text:"Raw",active:b(c),onClick:U(it=>W(c),["stop"])},null,8,["active","onClick"])):N("",!0)]),"expanded-row":a(({columns:i,item:c})=>[l.detailsJson?(n(),h("tr",Ge,[m("td",{colspan:i.length},[m("div",Qe,v(c.detailsJson),1)],8,Ke)])):N("",!0)]),_:2},1032,["expanded","items","headers","onUpdate:expanded"])],8,je)])):l.detailsJson?(n(),h("tr",{key:1,class:F(["tr_row_expanded",{tr_delete_method:l.deleted}])},[m("td",{colspan:d.length,class:"pa-0"},[m("div",Ye,[l.isRethinkPosition?N("",!0):(n(),h("div",{key:0,class:F(["detail_hash",{"has-changed":e.hasChanged()}]),onClick:i=>e.copyText(l.detailsHash)},[o(Q,null,{tooltip:a(()=>t[23]||(t[23]=[r(" Copied! ")])),default:a(()=>[r(" Details Hash: "+v(l.detailsHash)+" ",1),o(g,{icon:"clarity:copy-line",class:"section-top__copy-icon",width:"0.8rem"})]),_:2},1024)],10,Ze)),e.isBaseTokenBalanceMethod(l)?(n(),h("div",at,v(l.detailsJson),1)):(n(),f(ke,{key:1,ref:"form",modelValue:e.formIsValid,"onUpdate:modelValue":t[9]||(t[9]=i=>e.formIsValid=i),disabled:!e.isMethodEditable(l)},{default:a(()=>[o(M,null,{default:a(()=>[o(B,{cols:"12",sm:"6"},{default:a(()=>[o(D,{class:"label_required mb-2"},{default:a(()=>t[24]||(t[24]=[r(" Position Name ")])),_:1}),o(x,{modelValue:e.navEntry.positionName,"onUpdate:modelValue":t[1]||(t[1]=i=>e.navEntry.positionName=i),placeholder:"E.g. WETH",rules:e.rules,required:""},null,8,["modelValue","rules"])]),_:1}),o(B,{cols:"12",sm:"6"},{default:a(()=>[o(D,{class:"label_required mb-2"},{default:a(()=>t[25]||(t[25]=[r(" Valuation Source ")])),_:1}),o(x,{modelValue:e.navEntry.valuationSource,"onUpdate:modelValue":t[2]||(t[2]=i=>e.navEntry.valuationSource=i),placeholder:"E.g. Uniswap ETH/USDC",rules:e.rules,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),o(M,null,{default:a(()=>[o(B,{cols:"12",sm:"6"},{default:a(()=>[o(D,{class:"mb-2"},{default:a(()=>t[26]||(t[26]=[r(" Position Type ")])),_:1}),o(q,{modelValue:e.navEntry.positionType,"onUpdate:modelValue":[t[3]||(t[3]=i=>e.navEntry.positionType=i),t[4]||(t[4]=i=>e.navEntry.positionType=i)],items:e.parsedPositionTypeItems,disabled:!e.isMethodEditable(l)},null,8,["modelValue","items","disabled"])]),_:2},1024),e.valuationTypes.length?(n(),f(B,{key:0,cols:"12",sm:"6"},{default:a(()=>[o(D,{class:"mb-2"},{default:a(()=>t[27]||(t[27]=[r(" Valuation Type ")])),_:1}),o(q,{modelValue:e.navEntry.valuationType,"onUpdate:modelValue":[t[5]||(t[5]=i=>e.navEntry.valuationType=i),t[6]||(t[6]=i=>e.navEntry.valuationType=i)],items:e.parsedValuationTypeItems},null,8,["modelValue","items"])]),_:1})):N("",!0)]),_:2},1024),o(M,{class:"mt-10"},{default:a(()=>[o(B,null,{default:a(()=>t[28]||(t[28]=[m("strong",null,"Method Details",-1)])),_:1})]),_:1}),o(M,null,{default:a(()=>[e.navEntry.positionType===e.PositionType.Composable?(n(),f(B,{key:0},{default:a(()=>[o(Se,{modelValue:e.expandedPanels,"onUpdate:modelValue":t[7]||(t[7]=i=>e.expandedPanels=i)},{default:a(()=>[(n(!0),h(A,null,oe(e.navEntry.details[e.navEntry.positionType],(i,c)=>(n(),f(Ee,{key:c,eager:""},{default:a(()=>[o(Be,{static:""},{default:a(()=>[m("div",et,[m("span",null,[m("strong",tt,v(c+1)+")",1),t[29]||(t[29]=r(" METHOD DETAILS "))]),o(L,{class:F(["method_details_status",{"method_details_status--valid":i.isValid}])},{default:a(()=>[i.isValid?(n(),h(A,{key:0},[t[30]||(t[30]=r(" Provided ")),o(g,{icon:"octicon:check-circle-16",height:"1.2rem",width:"1.2rem"})],64)):(n(),h(A,{key:1},[t[31]||(t[31]=r(" Incomplete ")),o(g,{icon:"pajamas:error",height:"1.2rem",width:"1.2rem"})],64))]),_:2},1032,["class"]),e.isMethodEditable(l)?(n(),f(C,{key:0,small:"",onClick:U(b=>e.deleteEditMethod(c),["stop"])},{default:a(()=>[o(J,{icon:"mdi-delete",color:"error"})]),_:2},1032,["onClick"])):N("",!0)])]),_:2},1024),o(be,null,{default:a(()=>[o(H,{modelValue:e.navEntry.details[e.navEntry.positionType][c],"onUpdate:modelValue":b=>e.navEntry.details[e.navEntry.positionType][c]=b,"position-type":e.navEntry.positionType,"valuation-type":e.navEntry.valuationType,"validate-on-mount":!0},null,8,["modelValue","onUpdate:modelValue","position-type","valuation-type"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["modelValue"])]),_:2},1024)):(n(),f(H,{key:1,modelValue:e.navEntry.details[e.navEntry.positionType][0],"onUpdate:modelValue":t[8]||(t[8]=i=>e.navEntry.details[e.navEntry.positionType][0]=i),"position-type":e.navEntry.positionType,"valuation-type":e.navEntry.valuationType},null,8,["modelValue","position-type","valuation-type"]))]),_:2},1024),e.navEntry.positionType===e.PositionType.Composable&&e.isMethodEditable(l)?(n(),f(M,{key:0},{default:a(()=>[o(B,{class:"text-center"},{default:a(()=>[o($,{class:"text-secondary",variant:"outlined",onClick:e.addEditMethodDetails},{append:a(()=>[o(g,{icon:"octicon:plus-circle-16",height:"1.2rem",width:"1.2rem"})]),default:a(()=>[t[32]||(t[32]=r(" Add Method Details "))]),_:1},8,["onClick"])]),_:1})]),_:1})):N("",!0),e.isMethodEditable(l)?(n(),f(M,{key:1,class:"mt-4"},{default:a(()=>[o(B,{class:"text-end"},{default:a(()=>[o($,{disabled:!e.hasChanged(),onClick:e.editMethod},{default:a(()=>t[33]||(t[33]=[r(" Edit Method ")])),_:1},8,["disabled","onClick"])]),_:1})]),_:1})):N("",!0)]),_:2},1032,["modelValue","disabled"]))])],8,We)],2)):N("",!0)]),bottom:a(()=>t[34]||(t[34]=[])),_:2},1032,["modelValue","expanded","headers","items","cell-props","search","show-select","onInput","onUpdate:expanded","onClick:row"])):(n(),h("div",st," No NAV details available. "))}const Ct=se(we,[["render",ot],["__scopeId","data-v-a19066d2"]]);export{Ct as _};
