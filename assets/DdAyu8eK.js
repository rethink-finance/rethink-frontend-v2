import{_ as X}from"./D6l9HyL_.js";import tt from"./DXxM2RMs.js";import et from"./DjpIg0M2.js";import{_ as z}from"./BhipA0pl.js";import nt from"./B2xZHB7-.js";import{A as T,u as U,i as H}from"./CL_pIM7N.js";import{d as O,c9 as Y,_ as q,f as c,cB as k,cY as Z,b as r,c as _,w as i,p as b,o as s,cZ as at,d9 as ot,da as st,h as p,a as o,e as t,c8 as R,cF as B,V as j,y as dt,cD as rt}from"./D3HDfnxy.js";import{V as w}from"./D3jptR6C.js";import{V as it}from"./Cg7Ey17u.js";import"./BKgeRXoF.js";import"./brVXf9Dm.js";import"./Dxh0CgvK.js";import"./DmMfJ0RA.js";import"./cVa1OdO9.js";import"./Ce8rn2uW.js";import"./BqVuMM-N.js";import"./Wy3Wx6Ei.js";import"./ERRp_wCL.js";import"./9IxLmHHa.js";import"./Dzq1tP6X.js";import"./BFVrtpKD.js";import"./CJiquoOh.js";import"./C8Z2lGgf.js";import"./DPhX8wWY.js";import"./BIwcGVZU.js";import"./COuEhvrh.js";import"./DWe-URJs.js";import"./8pzO0o2T.js";import"./CH598blW.js";import"./BAneylHg.js";import"./CgAV7UTW.js";import"./DzKiJ9cp.js";import"./DjkxKK4u.js";import"./D-HsWzDh.js";import"./DkcdTJJR.js";const ct=O({name:"NAVUpdates",props:{fund:{type:Object,default:()=>{}}},setup(){const n=U(),e=H(),{getFormattedBaseTokenValue:u}=Y(n);return{fundStore:n,actionStateStore:e,getFormattedBaseTokenValue:u}},computed:{isLoadingFetchFundNAVUpdatesActionState(){return this.actionStateStore.isActionState("fetchFundNAVDataAction",T.Loading)}},methods:{navUpdateTotalNav(n){var e,u;return(e=n.navParts)!=null&&e.totalNAV?this.getFormattedBaseTokenValue((u=n.navParts)==null?void 0:u.totalNAV):"N/A"}}}),ut={class:"details main_grid main_grid--full-width"};function lt(n,e,u,g,V,f){var d;const v=z,S=nt;return s(),c("div",ut,[n.isLoadingFetchFundNAVUpdatesActionState?(s(),c(k,{key:0},Z(3,l=>r(w,{key:l,type:"list-item"})),64)):((d=n.fund.navUpdates)==null?void 0:d.length)>0?(s(!0),c(k,{key:1},Z(n.fund.navUpdates,(l,y)=>(s(),_(S,{key:y,title:l.date,"grow-column1":!0,title2:n.navUpdateTotalNav(l),"grow-column2":!0,"no-body-padding":"","bg-transparent":""},{body:i(()=>{var h,A,N;return[r(v,{"fund-chain-id":n.fundStore.selectedFundChain,"fund-address":n.fundStore.fundAddress,"fund-contract-base-token-balance":Number((h=n.fundStore.fund)==null?void 0:h.fundContractBaseTokenBalance),"safe-contract-base-token-balance":Number((A=n.fundStore.fund)==null?void 0:A.safeContractBaseTokenBalance),"fee-balance":Number((N=n.fundStore.fund)==null?void 0:N.feeBalance),methods:l.entries,idx:"navUpdates"},null,8,["fund-chain-id","fund-address","fund-contract-base-token-balance","safe-contract-base-token-balance","fee-balance","methods"])]}),_:2},1032,["title","title2"]))),128)):(s(),c(k,{key:2},[b(" There are currently no NAV updates. ")],64))])}const mt=q(ct,[["render",lt]]),pt={class:"nav"},ft={class:"main_header__title"},_t={class:"main_header__subtitle"},bt={key:1,class:"ms-2"},vt={class:"button_container"},ht={key:1,class:"tooltip-wrapper"},At={class:"main_card"},Nt={class:"methods main_grid main_grid--full-width main_grid--no-gap"},kt={class:"main_card"},gt=O({__name:"index",setup(n){const e=U(),u=at(),g=H(),V=ot(),f=st().fund,{isUsingZodiacPilotExtension:v,selectedFundSlug:S,fundLastNAVUpdate:d,fundLastNAVUpdateMethods:l}=Y(U()),y=p(()=>{var m;return(m=d==null?void 0:d.value)!=null&&m.date?d.value.date??"N/A":"N/A"}),h=p(()=>{var m;return(m=d==null?void 0:d.value)!=null&&m.date?l.value||[]:e.fundInitialNAVMethods||[]}),A=p(()=>e.fundTotalNAV?e.getFormattedBaseTokenValue(e.fundTotalNAV):"N/A"),N=p(()=>f.navUpdates?{...f,navUpdates:f.navUpdates.slice().reverse()}:f),x=p(()=>g.isActionState("postUpdateNAVAction",T.Loading)),F=p(()=>g.isActionState("fetchFundNAVDataAction",T.Loading));return(m,a)=>{var M,L,$,P,D,E,I;const G=X,C=tt,J=et,K=z,Q=mt;return s(),c("div",pt,[r(C,null,{default:i(()=>[o("div",null,[o("div",ft,[t(F)?(s(),_(w,{key:0,type:"text",class:"total_nav_skeleton"})):(s(),c(k,{key:1},[b(R(t(A)),1)],64))]),o("div",_t,[a[1]||(a[1]=o("div",null," Last updated on ",-1)),t(F)?(s(),_(w,{key:0,type:"text",class:"last_nav_update_skeleton"})):(s(),c("strong",bt,R(t(y)),1))])]),o("div",vt,[t(V).isManageMode?(s(),_(G,{key:0,to:`/details/${t(S)}/nav/manage`},{default:i(()=>[r(j,{class:"text-secondary",variant:"outlined"},{default:i(()=>a[2]||(a[2]=[b(" Manage NAV Methods ")])),_:1})]),_:1},8,["to"])):B("",!0),t(V).isManageMode?(s(),c("div",ht,[r(it,{activator:"parent",location:"bottom",disabled:t(v)},{activator:i(({props:W})=>[r(j,dt(W,{disabled:!t(v)||t(x),class:"bg-primary text-secondary",onClick:a[0]||(a[0]=Vt=>t(u).isConnected?t(e).postUpdateNAV():null)}),{prepend:i(()=>[t(x)?(s(),_(rt,{key:0,class:"d-flex",size:"20",width:"3",indeterminate:""})):B("",!0)]),default:i(()=>[a[3]||(a[3]=b(" Update NAV "))]),_:2},1040,["disabled"])]),default:i(()=>a[4]||(a[4]=[b(" Switch to the Zodiac Pilot Extension to Update NAV. ")])),_:1},8,["disabled"])])):B("",!0)])]),_:1}),o("div",At,[r(C,null,{default:i(()=>[o("div",null,[a[5]||(a[5]=o("div",{class:"subtitle_white mb-4"}," NAV Methods ",-1)),o("div",null,[r(J,{info:"Learn more about NAV methods",icon:!0,link:"https://docs.rethink.finance/rethink.finance/protocol/architecture/nav-calculator-contract"})])])]),_:1}),o("div",Nt,[r(K,{"fund-chain-id":t(e).selectedFundChain,"fund-address":t(e).fundAddress,"fund-contract-base-token-balance":Number((M=t(e).fund)==null?void 0:M.fundContractBaseTokenBalance),"safe-contract-base-token-balance":Number((L=t(e).fund)==null?void 0:L.safeContractBaseTokenBalance),"fee-balance":Number(($=t(e).fund)==null?void 0:$.feeBalance),"safe-address":(P=t(e).fund)==null?void 0:P.safeAddress,"base-symbol":(D=t(e).fund)==null?void 0:D.baseToken.symbol,"base-decimals":(E=t(e).fund)==null?void 0:E.baseToken.decimals,methods:t(h),loading:t(F),"nav-parts":(I=t(d))==null?void 0:I.navParts,"show-summary-row":"","show-last-nav-update-value":"","show-base-token-balances":"","show-simulated-nav":"",idx:"fundSlug/nav/index"},null,8,["fund-chain-id","fund-address","fund-contract-base-token-balance","safe-contract-base-token-balance","fee-balance","safe-address","base-symbol","base-decimals","methods","loading","nav-parts"])])]),o("div",kt,[a[6]||(a[6]=o("div",{class:"subtitle_white mb-4"}," NAV Updates ",-1)),o("div",null,[r(Q,{fund:t(N)},null,8,["fund"])])])])}}}),se=q(gt,[["__scopeId","data-v-b2c213bc"]]);export{se as default};
