import{u as I,_ as T,a as B,b as $}from"./DaE0XD9i.js";import N from"./C3ePeIob.js";import{u as f,i as E,A as L}from"./CL_pIM7N.js";import{u as U,a as D}from"./DUEW-Lc3.js";import{d as j,g as q,d9 as z,u as G,c9 as H,da as J,h as K,cf as O,f as m,b as t,w as a,a as n,cF as Q,e as s,i as W,c as X,p as v,V as p,l as Y,o as d,_ as Z}from"./D3HDfnxy.js";import"./Cg7Ey17u.js";import"./DAa023eC.js";import"./BqVuMM-N.js";import"./CMDKgJFj.js";import"./Ce8rn2uW.js";import"./BFVrtpKD.js";import"./CJiquoOh.js";import"./C8Z2lGgf.js";import"./DPhX8wWY.js";import"./LimOvMzi.js";import"./DWe-URJs.js";import"./BjIfPQ7A.js";import"./B2xZHB7-.js";import"./D-HsWzDh.js";import"./Dl5sfn4-.js";import"./COuEhvrh.js";import"./8pzO0o2T.js";import"./CH598blW.js";import"./Dzq1tP6X.js";import"./BIwcGVZU.js";import"./DWdhgoOB.js";import"./BDLqzIVl.js";import"./DCVy_-j1.js";import"./DmMfJ0RA.js";import"./cVa1OdO9.js";import"./DkcdTJJR.js";const ee={class:"permissions"},oe={class:"info_container"},se={class:"info_container__buttons"},te={class:"d-flex align-center"},ie={class:"d-flex align-center me-6"},re={key:0,class:"is-manage-mode"},ae={key:1},ne=j({__name:"index",setup(de){const S=q(),u=f(),g=U(),h=z(),x=D(),A=G(),P=E(),{selectedFundSlug:R}=H(f()),o=J().fund,{roles:_,selectedRole:c,isEditDisabled:r,isFetchingPermissions:y,fetchPermissions:C}=I(o.chainId,o.address),k=K(()=>y.value||P.isActionState("fetchRoleModAddressAddressAction",L.Loading)),w=async()=>{if(!(o!=null&&o.address)){_.value=[];return}try{const i=await u.fetchRoleModAddress(o.address);await C(i)}catch(i){console.error(i),A.errorToast("Failed loading permissions. Please refresh page.")}},V=async()=>{try{g.rawTransactions=await x.updateRole(o.chainId)}catch(i){console.error("Failed updating role",i)}S.push(`/details/${R.value}/governance/delegated-permissions`)};return O(()=>[o.chainShort,u.fetchRoleModAddress],()=>{w()},{immediate:!0}),(i,e)=>{const b=Y("Icon"),F=$,M=N;return d(),m("div",ee,[t(M,{class:"permissions__content"},{default:a(()=>[n("div",oe,[n("div",se,[n("div",te,[n("div",ie,[t(T,{modelValue:s(c),"onUpdate:modelValue":e[0]||(e[0]=l=>W(c)?c.value=l:null),roles:s(_)},null,8,["modelValue","roles"])]),t(B,{disabled:s(r)},null,8,["disabled"])]),s(h).isManageMode?(d(),m("div",re,[s(r)?(d(),X(p,{key:0,color:"primary",onClick:e[1]||(e[1]=l=>r.value=!1)},{default:a(()=>e[3]||(e[3]=[v(" Edit ")])),_:1})):(d(),m("div",ae,[t(p,{color:"primary",onClick:V},{default:a(()=>e[4]||(e[4]=[v(" Create Permissions Proposal ")])),_:1}),t(p,{variant:"text",color:"secondary",onClick:e[2]||(e[2]=l=>r.value=!0)},{default:a(()=>[t(b,{icon:"ic:twotone-cancel",width:"1.5rem"})]),_:1})]))])):Q("",!0)])]),t(F,{class:"mt-6","chain-id":s(o).chainId,disabled:s(r),"is-loading":s(k)},null,8,["chain-id","disabled","is-loading"])]),_:1})])}}}),De=Z(ne,[["__scopeId","data-v-ff424529"]]);export{De as default};
