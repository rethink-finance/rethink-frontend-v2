import{_ as $}from"./B-BrJIQs.js";import{_ as D}from"./CA83JcoV.js";import{V as L}from"./C4hVFzQI.js";import{d as U,h as f,f as a,b as y,a as s,w as i,cF as A,c8 as d,o as e,_ as T,g as I,d9 as P,c as _,cx as w,G as k,e as l,cu as v,q as b,z as B,er as R,es as z}from"./_BmmGIGi.js";import{s as M,t as S,d as C}from"./BwiW5Nlt.js";import{n as j}from"./C-6dRAei.js";import{u as O}from"./CE20ZzCL.js";import{B as E,j as K,i as q,A as x}from"./BMM55Xfq.js";import{a as G}from"./BWHNz5Ry.js";import{V as F}from"./E_YhHG9T.js";import"./B5L2f44s.js";import"./cVa1OdO9.js";import"./CKS8D1OD.js";import"./DxTlZv4G.js";import"./DcNhhkuR.js";import"./D5-R3KnC.js";import"./BJ2h6DUM.js";import"./BlSCcxsD.js";import"./CsjIet9h.js";import"./DeSAm6LB.js";const H={class:"fund_name"},J=["src"],Q={class:"title_wrapper"},W={class:"text-white"},X={key:0,class:"strategist_url"},Y={key:1,class:"strategist_url"},Z=U({__name:"FundNameCell",props:{image:{type:String,default:""},title:{type:String,default:""},subtitle:{type:String,default:""},strategistName:{type:String,default:""},strategistUrl:{type:String,default:""}},setup(o){const u=o,h=f(()=>(u.subtitle.length<=80,u.subtitle));return(m,p)=>(e(),a("div",H,[y(L,{size:"4.5rem",rounded:!1,class:"fund_name__avatar"},{default:i(()=>[s("img",{cover:"",src:u.image},null,8,J)]),_:1}),s("div",Q,[s("h4",W,d(o.title),1),o.strategistName?(e(),a("div",X,[s("h5",null,"by "+d(o.strategistName),1)])):o.subtitle?(e(),a("div",Y,[s("h5",null,d(h.value),1)])):A("",!0)])]))}}),tt=T(Z,[["__scopeId","data-v-e82b3e74"]]),et={key:0,class:"curator-cell"},at=["href"],st={key:1},ot={key:1},nt={class:"base-asset-cell"},it={class:"text-white"},lt={key:0,class:"nav_usd_value"},rt={key:1,class:"nav_entries__no_data"},dt=U({__name:"TableFunds",props:{items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(o){const{getFundDetailsUrl:u}=O(),h=I(),m=P(),p=f(()=>[{title:"Vault Name",key:"name",sortable:!1},{title:"Current NAV",key:"totalSimulatedNavUSD",align:"end",width:150},{title:"Curator",key:"curator",sortable:!1,width:180},{title:"Base Asset",key:"baseAsset",width:125,align:"start"},{title:"Chain",key:"chainShort",width:65,align:"end"},{title:"Cumulative",key:"cumulativeReturnPercent",align:"end",width:170}]),N=n=>{if(n.address&&n.chainId){const c=(E[n.chainId]||[]).find(t=>t.address.toLowerCase()===n.address.toLowerCase());if(c!=null&&c.subtitle)return c.subtitle}return n.description},V=(n,r)=>{const c=n.target;if(c.tagName.toLowerCase()==="a"||c.closest("a"))return;const t=u(r.item.chainId,r.item.fundToken.symbol,r.item.address);n.button===1||n.metaKey||n.ctrlKey?window.open(t,"_blank"):h.push(t)};return(n,r)=>{const c=$;return o.items.length||o.loading?(e(),_(G,{key:0,class:"table_all_funds",headers:p.value,hover:"",items:o.items,loading:o.loading&&o.items.length===0,"loading-text":"Loading OIVs","items-per-page":"-1","onMousedown:row":V},{"item.name":i(({item:t})=>[y(tt,{image:t.photoUrl,title:t.title,subtitle:N(t)},null,8,["image","title","subtitle"])]),"item.curator":i(({item:t})=>[t.strategistName?(e(),a("div",et,[t.strategistUrl?(e(),a("a",{key:0,href:t.strategistUrl,target:"_blank",class:"curator-link"},d(t.strategistName),9,at)):(e(),a("span",st,d(t.strategistName),1))])):(e(),a("div",ot," - "))]),"item.chainShort":i(({item:t})=>[y(c,{"chain-short":t.chainShort,class:"mr-2"},null,8,["chain-short"])]),"item.baseAsset":i(({item:t})=>[s("div",nt,[y(D,{"chain-id":t.chainId,"chain-short":t.chainShort,"token-address":t.baseToken.address,class:"mr-2"},null,8,["chain-id","chain-short","token-address"])])]),"item.totalSimulatedNavUSD":i(({item:t})=>[s("div",{class:k({"justify-center":t.isNavUpdatesLoading})},[t.isNavUpdatesLoading?(e(),_(w,{key:0,size:"18",width:"2",indeterminate:""})):!t.totalSimulatedNav&&!t.lastNAVUpdateTotalNAV?(e(),a(v,{key:1},[b(" N/A ")],64)):(e(),a(v,{key:2},[t.totalSimulatedNav&&t.totalSimulatedNavCalculatedAt?(e(),_(F,{key:0,disabled:!l(m).isManageMode,location:"bottom"},{activator:i(({props:g})=>[s("div",B({class:"d-flex flex-column"},g),[s("div",it,d(l(S)(l(C)(t.totalSimulatedNav||t.lastNAVUpdateTotalNAV,t.baseToken.decimals,!1,!1))+" "+t.baseToken.symbol),1),t.totalSimulatedNavUSD?(e(),a("div",lt," $"+d(l(S)(t.totalSimulatedNavUSD)),1)):A("",!0)],16)]),default:i(()=>[r[0]||(r[0]=b(" Calculated on ")),s("strong",null,d(t.totalSimulatedNavCalculatedAt),1)]),_:2},1032,["disabled"])):(e(),_(F,{key:1,location:"bottom",disabled:!l(m).isManageMode},{activator:i(({props:g})=>[s("span",R(z(g)),d(l(S)(l(C)(t.totalSimulatedNav||t.lastNAVUpdateTotalNAV,t.baseToken.decimals))+" "+t.baseToken.symbol),17)]),default:i(()=>{var g;return[s("strong",null,[((g=t==null?void 0:t.navUpdates)==null?void 0:g.length)>0?(e(),a(v,{key:0},[b(" Based on the last NAV update ")],64)):(e(),a(v,{key:1},[b(" Based on the current NAV methods. ")],64))])]}),_:2},1032,["disabled"]))],64))],2)]),"item.cumulativeReturnPercent":i(({item:t})=>[s("div",{class:k({"justify-center":t.isNavUpdatesLoading})},[t.isNavUpdatesLoading?(e(),_(w,{key:0,size:"18",width:"2",indeterminate:""})):(e(),a("div",{key:1,class:k(l(j)(t.cumulativeReturnPercent))},d(l(M)(t.cumulativeReturnPercent,!0)??"N/A"),3))],2)]),bottom:i(()=>r[1]||(r[1]=[])),_:2},1032,["headers","items","loading"])):o.items.length===0&&!o.loading?(e(),a("div",rt," No OIVs available. ")):A("",!0)}}}),ct=T(dt,[["__scopeId","data-v-df5ac4ca"]]),ut={class:"discover"},mt={key:0,class:"w-100 d-flex justify-center flex-column"},Dt={__name:"index",setup(o){const u=f(()=>h.funds),h=K(),m=q(),p=f(()=>m.isActionState("fetchFundsAction",x.Loading)),N=f(()=>m.isActionState("fetchFundsAction",x.Error));return console.log("on created"),h.fetchFunds(),(V,n)=>{const r=ct;return e(),a("div",ut,[l(N)?(e(),a("div",mt,n[0]||(n[0]=[s("h3",null,"Oops, something went wrong while getting OIVs data",-1),s("span",null," Maybe the current RPC is down? ",-1)]))):(e(),_(r,{key:1,loading:l(p),items:l(u)},null,8,["loading","items"]))])}}};export{Dt as default};
