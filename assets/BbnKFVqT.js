import{_ as P}from"./nuwz1RT2.js";import z from"./DpsThwoF.js";import{_ as G}from"./BO2uj0d2.js";import{_ as K}from"./pbz4eYYZ.js";import{u as w,i as Q,A as W,k as B,s as F}from"./BMM55Xfq.js";import{d as X,c9 as Y,u as Z,r as ee,h as b,d5 as p,cC as te,ca as ae,cb as se,f as oe,b as o,a as i,w as n,e as t,i as M,V as l,q as u,c8 as ne,c as re,cF as de,o as C,d6 as ie,_ as le}from"./_BmmGIGi.js";import"./E_YhHG9T.js";import"./DRw30qtb.js";import"./CmEKxddJ.js";import"./B1b9GBsg.js";import"./BwiW5Nlt.js";import"./cVa1OdO9.js";import"./CKS8D1OD.js";import"./H7YDYKaw.js";import"./DNTpA6f4.js";import"./BSRo00oN.js";import"./D0LsXpOS.js";import"./D_-Msn7h.js";import"./BlSCcxsD.js";import"./BJ2h6DUM.js";import"./D5-R3KnC.js";import"./B5L2f44s.js";import"./C7URMWzZ.js";import"./DcNhhkuR.js";import"./CsjIet9h.js";import"./C4hVFzQI.js";import"./DeSAm6LB.js";import"./Cx6b7hxJ.js";import"./DtO3A6PH.js";import"./BWHNz5Ry.js";import"./DpICAjib.js";import"./B9vFmp28.js";import"./D4QhXGu9.js";import"./DAKP5pNJ.js";import"./DWhwHasW.js";import"./DxTlZv4G.js";const ue={class:"main_header__actions"},ce={class:"main_card"},me={class:"subtitle_steel_blue mb-0"},pe={class:"btn-draft"},fe=X({__name:"index",emits:["updateBreadcrumbs"],setup(_e,{emit:U}){const v=U,{selectedFundSlug:d,selectedFundChain:T,selectedFundAddress:g,fundManagedNAVMethods:s,fundLastNAVUpdateMethods:N,fundAddress:D}=Y(w()),f=Z(),r=w(),E=Q(),c=ee(!1),L=a=>{s.value=[...s.value,...a]},$=b(()=>E.isActionState("fetchFundNAVDataAction",W.Loading)),I=b(()=>s.value.filter(e=>e.deleted||e.isNew).length),O=[{title:"NAV Methods",disabled:!1,to:`/details/${d.value}/nav`},{title:"Manage NAV Methods",disabled:!0,to:`/details/${d.value}/nav/manage`}],J=async()=>{try{s.value=JSON.parse(JSON.stringify(N.value,p),ie);const a=await B("navUpdateEntries",{});delete a[g.value],F("navUpdateEntries",a),f.successToast("Draft cleared successfully")}catch(a){console.error(a),f.errorToast("Failed to clear NAV draft")}},R=async()=>{try{const a=await B("navUpdateEntries",{});a[g.value]=JSON.parse(JSON.stringify(s.value,p)),F("navUpdateEntries",a)}catch(a){console.error(a),f.errorToast("Failed to save NAV draft")}},j=b(()=>{const a=JSON.stringify(s.value,p)===JSON.stringify(N.value,p),e=Object.keys(s.value).length===0;return!a&&!e});return te(s,()=>{R()},{deep:!0}),ae(()=>{v("updateBreadcrumbs",O)}),se(()=>{v("updateBreadcrumbs",[])}),(a,e)=>{var h,A,V,S,k,x;const _=P,y=z,q=G,H=K;return C(),oe("div",null,[o(y,null,{default:n(()=>[e[7]||(e[7]=i("div",{class:"main_header__title"}," Manage NAV Methods ",-1)),i("div",ue,[o(_,{to:`/details/${t(d)}/nav/manage/newMethod`},{default:n(()=>[o(l,{class:"text-secondary",variant:"outlined"},{default:n(()=>e[3]||(e[3]=[u(" Define New Method ")])),_:1})]),_:1},8,["to"]),o(_,{to:`/details/${t(d)}/nav/manage/addFromLibrary`},{default:n(()=>[o(l,{class:"text-secondary",variant:"outlined"},{default:n(()=>e[4]||(e[4]=[u(" Add From Library ")])),_:1})]),_:1},8,["to"]),o(l,{class:"text-secondary",variant:"outlined",onClick:e[0]||(e[0]=m=>c.value=!0)},{default:n(()=>e[5]||(e[5]=[u(" Import Raw ")])),_:1}),o(_,{to:`/details/${t(d)}/nav/manage/proposal`},{default:n(()=>[o(l,{class:"bg-primary text-secondary"},{default:n(()=>e[6]||(e[6]=[u(" Create NAV Proposal ")])),_:1})]),_:1},8,["to"])])]),_:1}),i("div",ce,[o(y,null,{default:n(()=>[i("div",me,ne(t(I))+" Changes ",1),i("div",pe,[t(j)?(C(),re(l,{key:0,class:"text-secondary",variant:"outlined",onClick:J},{default:n(()=>e[8]||(e[8]=[u(" Clear Draft ")])),_:1})):de("",!0)])]),_:1}),o(q,{methods:t(s),"onUpdate:methods":e[1]||(e[1]=m=>M(s)?s.value=m:null),"fund-chain-id":t(T),"fund-address":t(D),"fund-contract-base-token-balance":Number((h=t(r).fund)==null?void 0:h.fundContractBaseTokenBalance),"safe-contract-base-token-balance":Number((A=t(r).fund)==null?void 0:A.safeContractBaseTokenBalance),"fee-balance":Number((V=t(r).fund)==null?void 0:V.feeBalance),"safe-address":(S=t(r).fund)==null?void 0:S.safeAddress,"base-symbol":(k=t(r).fund)==null?void 0:k.baseToken.symbol,"base-decimals":(x=t(r).fund)==null?void 0:x.baseToken.decimals,deletable:"","show-summary-row":"","show-base-token-balances":"","show-simulated-nav":"",idx:"nav/manage/index",loading:t($)},null,8,["methods","fund-chain-id","fund-address","fund-contract-base-token-balance","safe-contract-base-token-balance","fee-balance","safe-address","base-symbol","base-decimals","loading"])]),o(H,{modelValue:t(c),"onUpdate:modelValue":e[2]||(e[2]=m=>M(c)?c.value=m:null),methods:t(s),onAddedMethods:L},null,8,["modelValue","methods"])])}}}),Ye=le(fe,[["__scopeId","data-v-e5373f31"]]);export{Ye as default};
