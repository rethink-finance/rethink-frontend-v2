import{u as at,V as ne,c as he,d as X,P as me,_ as nt,e as ke,f as pt,a as re}from"./Crw4OH5z.js";import mt from"./Wy3Wx6Ei.js";import vt from"./DnDfRTIK.js";import{t as Se}from"./BjIfPQ7A.js";import{v as z,x as J,G as j,b as a,y as q,cz as bt,h as N,cc as we,cA as ft,dp as le,cE as Ie,cB as $,d as Ae,P as _t,u as gt,cZ as ht,r as H,cf as lt,ca as it,f,a as c,c8 as S,cY as ae,p as D,c as B,cF as G,l as $e,F as be,e as s,w as h,V as de,i as fe,cD as _e,o as l,_ as ce,J as ue,dX as rt,L as ge,Q as qe,ck as Pe,dn as De,dZ as yt,cS as Vt,e4 as kt,dd as St,de as dt,cQ as Pt,cR as xt,cy as Ct,df as Tt,dg as wt,dh as It,ea as At,cK as $t,cL as Dt,dj as Nt,cV as Rt,eb as Bt,dk as Ft,dl as Et,dm as Ut,ej as Gt,cW as Ot,cX as Lt,e7 as Mt,dq as Wt,cC as Ht,fc as zt,di as jt,H as Yt,fd as Xt,z as qt,B as Jt,dC as Qt,cO as Zt,cP as se,cd as Kt,fe as eo,cI as to,eo as oo,c9 as so,cb as ao,d4 as no}from"./D3HDfnxy.js";import{u as xe,i as lo,A as ye,T as io}from"./CL_pIM7N.js";import{V as ro}from"./LimOvMzi.js";import{V as Ce}from"./Cg7Ey17u.js";import{V as Je,a as co,b as uo}from"./BFVrtpKD.js";import{V as Te,m as po,a as mo,b as vo}from"./CH598blW.js";import{_ as bo}from"./BhipA0pl.js";import fo from"./Dxh0CgvK.js";import _o from"./B2xZHB7-.js";import{a as go}from"./CgAV7UTW.js";import{V as ho}from"./D3jptR6C.js";import{c as yo,i as Vo,j as Qe}from"./COuEhvrh.js";import{V as Ze,a as ko}from"./8pzO0o2T.js";import{x as Ve,h as Ke,r as et}from"./DmMfJ0RA.js";import So from"./B02PZWna.js";import Po from"./KLLNvWeJ.js";import{V as tt,m as xo,a as ot,b as Co}from"./_rqGDqDv.js";import{V as st}from"./CnuNmnUl.js";import"./BDLqzIVl.js";import"./DkcdTJJR.js";import"./cVa1OdO9.js";import"./Ce8rn2uW.js";import"./DWe-URJs.js";import"./CJiquoOh.js";import"./BKgeRXoF.js";import"./brVXf9Dm.js";import"./BqVuMM-N.js";import"./ERRp_wCL.js";import"./9IxLmHHa.js";import"./Dzq1tP6X.js";import"./C8Z2lGgf.js";import"./DPhX8wWY.js";import"./BIwcGVZU.js";import"./BAneylHg.js";import"./DzKiJ9cp.js";import"./DjkxKK4u.js";import"./D-HsWzDh.js";import"./B_WwLGbT.js";import"./QZVO053q.js";import"./DjpIg0M2.js";import"./CO3sE27b.js";import"./Dl5sfn4-.js";import"./CMDKgJFj.js";import"./DAa023eC.js";const To=J({...po({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),wo=z()({name:"VRadio",props:To(),setup(e,p){let{slots:n}=p;return j(()=>{const t=Te.filterProps(e);return a(Te,q(t,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),Io=J({height:{type:[Number,String],default:"auto"},...co(),...Ie(mo(),["multiple"]),trueIcon:{type:le,default:"$radioOn"},falseIcon:{type:le,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Ao=z()({name:"VRadioGroup",inheritAttrs:!1,props:Io(),emits:{"update:modelValue":e=>!0},setup(e,p){let{attrs:n,slots:t}=p;const y=bt(),b=N(()=>e.id||`radio-group-${y}`),d=we(e,"modelValue");return j(()=>{const[u,w]=ft(n),P=Je.filterProps(e),x=Te.filterProps(e),C=t.label?t.label({label:e.label,props:{for:b.value}}):e.label;return a(Je,q({class:["v-radio-group",e.class],style:e.style},u,P,{modelValue:d.value,"onUpdate:modelValue":V=>d.value=V,id:b.value}),{...t,default:V=>{let{id:k,messagesId:F,isDisabled:I,isReadonly:R}=V;return a($,null,[C&&a(uo,{id:k.value},{default:()=>[C]}),a(vo,q(x,{id:k.value,"aria-describedby":F.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:I.value,readonly:R.value,"aria-labelledby":C?k.value:void 0,multiple:!1},w,{modelValue:d.value,"onUpdate:modelValue":L=>d.value=L}),t)])}})}),{}}}),$o={class:"section-top"},Do={class:"section-top__title"},No={class:"section-top__meta-container"},Ro={class:"section-top__meta"},Bo={class:"section-top__meta-row"},Fo={key:0,class:"section-top__meta-row vote_submission"},Eo={key:1,class:"vote_submission"},Uo={class:"vote_submission__text"},Go={key:1,class:"section-top__meta-row vote_submission"},Oo={class:"section-top__meta-row"},Lo={class:"meta-label"},Mo={class:"buttons-container"},Wo={class:"main_card di-card"},Ho={class:"di-card__header-container"},zo={class:"meta-label"},jo={class:"di-card__title"},Yo=Ae({__name:"ProposalSectionTop",props:{proposal:{type:Object,default:()=>{}},activeUserVoteSubmission:{type:Object,default:()=>{}},loadingProposalVoteSubmissions:{type:Boolean,default:!1}},emits:["vote-success"],setup(e,{emit:p}){const n=p,t=e,y=_t(),b=xe(),d=gt(),u=ht(),w=at(),P=H(!1),x=H(!1),C=[{label:X.For,value:he[X.For],icon:ne[X.For]},{label:X.Against,value:he[X.Against],icon:ne[X.Against]},{label:X.Abstain,value:he[X.Abstain],icon:ne[X.Abstain]}],V=N(()=>[{label:"Proposal ID:",value:t.proposal.proposalId,format:Se},{label:"Proposer",value:t.proposal.proposer,format:Se}]),k=N(()=>{var g;return((g=t.proposal)==null?void 0:g.state)===me.Active}),F=N(()=>t.proposal.state===me.Succeeded),I=N(()=>t.proposal.state===me.Executed),R=N(()=>w.hasAccountVoted(t.proposal.proposalId)??!1),L=H(!1),T=H(-1),O=g=>{navigator.clipboard.writeText(g)},Y=async()=>{P.value=!0,console.log("cast vote",t.proposal.proposalId,T.value);try{await b.fundGovernorContract.send("castVote",{},t.proposal.proposalId,T.value).on("transactionHash",g=>{console.log("tx hash: "+g),d.addToast("Your vote has been submitted. Please wait for it to be confirmed.")}).on("receipt",g=>{var o,r;console.log("receipt: ",g),g.status?(d.successToast("Vote successful."),b.activeAccountAddress!==void 0&&t.proposal.proposalId&&((o=w.connectedAccountProposalsHasVoted)[r=t.proposal.proposalId]??(o[r]={}),w.connectedAccountProposalsHasVoted[t.proposal.proposalId][b.activeAccountAddress]=!0),n("vote-success",T.value)):d.errorToast("The vote transaction has failed. Please contact the Rethink Finance support."),P.value=!1,E()}).on("error",g=>{console.error(g),P.value=!1,d.errorToast("There has been an error. Please contact the Rethink Finance support."),E()})}catch{P.value=!1}},_=async()=>{x.value=!0,console.log("execute Data:",JSON.stringify([t.proposal.targets,t.proposal.values,t.proposal.calldatas,t.proposal.descriptionHash],null,2));const g=[t.proposal.targets,t.proposal.values,t.proposal.calldatas,t.proposal.descriptionHash];try{await b.fundGovernorContract.send("execute",{},...g).on("transactionHash",o=>{console.log("tx hash: "+o),d.addToast("Proposal execution has been submitted. Please wait for it to be confirmed.")}).on("receipt",o=>{console.log("receipt: ",o),o.status?d.successToast("Proposal execution successful."):d.errorToast("Proposal execution transaction has failed. Please contact the Rethink Finance support."),x.value=!1}).on("error",o=>{console.error(o),x.value=!1,d.errorToast("There has been an error. Please contact the Rethink Finance support.")})}catch(o){console.error("Error here proposal: ",o),x.value=!1}},Z=()=>{L.value=!0},E=()=>{L.value=!1},te=g=>["di-card__radio",{[`di-card__radio--${ke[pt[g]]}`]:g===T.value}],K=()=>{var r,v;const g=b.selectedFundChain;if(b.activeAccountAddress===void 0||!t.proposal.proposalId)return;t.proposal.hasVotedLoading=!0;const o=b.activeAccountAddress;(r=w.connectedAccountProposalsHasVoted)[v=t.proposal.proposalId]??(r[v]={}),y.callWithRetry(g,()=>b.fundGovernorContract.methods.hasVoted(t.proposal.proposalId,o).call()).then(A=>{w.connectedAccountProposalsHasVoted[t.proposal.proposalId][o]=A}).finally(()=>{t.proposal.hasVotedLoading=!1})};return lt(()=>t.proposal.proposalId,g=>{K()},{immediate:!0}),it(()=>{K()}),(g,o)=>{var W,oe,ee,pe;const r=nt,v=$e("Icon"),A=mt,M=vt;return l(),f("div",$o,[c("h2",Do,S(e.proposal.title),1),c("div",No,[c("div",Ro,[c("div",Bo,[a(r,{value:e.proposal.state,class:"section-top__tag"},null,8,["value"]),(l(!0),f($,null,ae(e.proposal.calldataTags??[],(m,U)=>(l(),B(r,{key:U,value:m,class:"section-top__tag"},null,8,["value"]))),128))]),e.loadingProposalVoteSubmissions||(W=e.activeUserVoteSubmission)!=null&&W.proposer?(l(),f("div",Fo,[o[2]||(o[2]=D(" Your Vote: ")),e.loadingProposalVoteSubmissions&&!((oe=e.activeUserVoteSubmission)!=null&&oe.proposer)?(l(),B(_e,{key:0,class:"d-flex",size:"18",width:"2",indeterminate:""})):(ee=e.activeUserVoteSubmission)!=null&&ee.proposer?(l(),f("div",Eo,[a(v,{icon:s(ne)[e.activeUserVoteSubmission.submission_status],width:"1.4rem",class:be(`icon--${s(ke)[e.activeUserVoteSubmission.submission_status]}`)},null,8,["icon","class"]),c("div",Uo,S((pe=e.activeUserVoteSubmission)==null?void 0:pe.submission_status),1)])):G("",!0)])):(l(),f("div",Go," You have not voted on this proposal. ")),c("div",Oo,[(l(!0),f($,null,ae(s(V),m=>{var U;return l(),f("div",{key:m.label,class:"section-top__meta-item"},[c("div",Lo,S(m.label)+" "+S(((U=m==null?void 0:m.format)==null?void 0:U.call(m,m.value))??m.value),1),a(A,{"hide-after":4e3},{tooltip:h(()=>o[3]||(o[3]=[c("div",{class:"tooltip__content"},[c("span",null,"Copied to clipboard")],-1)])),default:h(()=>[a(v,{icon:"clarity:copy-line",class:"section-top__copy-icon",width:"0.8rem",onClick:i=>O(m.value)},null,8,["onClick"])]),_:2},1024)])}),128))])]),c("div",Mo,[e.loadingProposalVoteSubmissions?(l(),B(_e,{key:0,class:"vote_submission",size:"35",width:"2",indeterminate:""})):(l(),f($,{key:1},[s(k)&&!s(R)?(l(),B(de,{key:0,class:"section-top__submit-button",disabled:!s(u).isConnected,onClick:Z},{default:h(()=>[o[4]||(o[4]=D(" Submit Vote ")),!s(u).isConnected||s(R)?(l(),B(Ce,{key:0,"model-value":!0,activator:"parent",location:"top","onUpdate:modelValue":m=>!1},{default:h(()=>[s(u).isConnected?G("",!0):(l(),f($,{key:0},[D(" Connect your wallet. ")],64))]),_:1})):G("",!0)]),_:1},8,["disabled"])):s(R)&&s(k)?(l(),B(M,{key:1,class:"notification"},{default:h(()=>o[5]||(o[5]=[D(" You have voted on this proposal. ")])),_:1})):G("",!0),s(F)&&!s(I)?(l(),B(de,{key:2,class:"section-top__submit-button",loading:s(x),disabled:!s(u).isConnected,onClick:_},{default:h(()=>[o[6]||(o[6]=D(" Execute Proposal ")),s(u).isConnected?G("",!0):(l(),B(Ce,{key:0,"model-value":!0,activator:"parent",location:"top","onUpdate:modelValue":m=>!1},{default:h(()=>[s(u).isConnected?G("",!0):(l(),f($,{key:0},[D(" Connect your wallet. ")],64))]),_:1}))]),_:1},8,["loading","disabled"])):G("",!0)],64))]),a(ro,{modelValue:s(L),"onUpdate:modelValue":o[1]||(o[1]=m=>fe(L)?L.value=m:null),scrim:"black",opacity:"0.25","max-width":"500"},{default:h(()=>[c("div",Wo,[c("div",Ho,[o[7]||(o[7]=c("div",{class:"di-card__header"}," Vote Submission ",-1)),a(v,{icon:s(ne)[s(X).Against],class:"di-card__close-icon",width:"1.5rem",onClick:E},null,8,["icon"])]),(l(!0),f($,null,ae(s(V).slice(0,1),m=>{var U;return l(),f("div",{key:m.label,class:"di-card__subtext"},[c("div",zo,S(m.label)+" "+S(((U=m==null?void 0:m.format)==null?void 0:U.call(m,m.value))??m.value),1),a(A,{"tooltip-text":"Copied"},{default:h(()=>[a(v,{icon:"clarity:copy-line",class:"section-top__copy-icon",width:"0.8rem",onClick:i=>O(m.value)},null,8,["onClick"])]),_:2},1024)])}),128)),c("h2",jo,S(e.proposal.title),1),o[9]||(o[9]=c("div",{class:"di-card__voting-power meta-label meta-label--uppercase"}," Voting Power: N/A (TODO) ",-1)),a(Ao,{modelValue:s(T),"onUpdate:modelValue":o[0]||(o[0]=m=>fe(T)?T.value=m:null),class:"di-card__radio-group"},{default:h(()=>[(l(),f($,null,ae(C,m=>a(wo,{key:m.value,label:m.label,value:m.value,class:"di-card__radio"},{label:h(()=>[a(v,{icon:m.icon,width:"1.4rem",class:be(te(m.value))},null,8,["icon","class"]),D(" "+S(m.label),1)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"]),a(de,{class:"di-card__submit-button",disabled:s(T)===-1,loading:s(P),onClick:Y},{default:h(()=>o[8]||(o[8]=[D(" Submit Vote ")])),_:1},8,["disabled","loading"])])]),_:1},8,["modelValue"])])])}}}),Xo=ce(Yo,[["__scopeId","data-v-23685810"]]),qo={class:"members_wallet"},Jo={class:"submission_status"},Qo={class:"submission_status__text"},Zo={key:0},Ko={key:1,class:"table-votes-submissions__no_data"},es=Ae({__name:"TableProposalVoteSubmissions",props:{items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const p=N(()=>{const n=[{title:"Members Wallet",key:"proposer",sortable:!0}];return n.push({title:"Date",key:"date",sortable:!0}),n.push({title:"Submission",key:"submission_status",sortable:!0}),n.push({title:"Voting Power",key:"quorumVotes",sortable:!0,align:"end"}),n});return(n,t)=>{const y=nt,b=$e("Icon");return e.items.length||e.loading?(l(),B(go,{key:0,class:"table-votes-submissions main_table",headers:s(p),hover:"",items:e.items,loading:e.loading&&e.items.length===0,"loading-text":"Loading Votes","items-per-page":"-1"},{"item.proposer":h(({item:d})=>[c("div",qo,[D(S(s(Se)(d.proposer))+" ",1),d.my_vote?(l(),B(y,{key:0,value:"This is you"})):G("",!0)])]),"item.submission_status":h(({item:d})=>[c("div",Jo,[a(b,{icon:s(ne)[d.submission_status],width:"1.4rem",class:be(`icon--${s(ke)[d.submission_status]}`)},null,8,["icon","class"]),c("div",Qo,S(d.submission_status),1)])]),"body.append":h(()=>[e.items.length&&e.loading?(l(),f("tr",Zo,[(l(!0),f($,null,ae(s(p),d=>(l(),f("td",{key:d},[a(ho,{type:"text",class:"table-votes-submissions__skeleton_loader"})]))),128))])):G("",!0)]),bottom:h(()=>t[0]||(t[0]=[])),_:2},1032,["headers","items","loading"])):(l(),f("div",Ko," No Proposal Vote Submissions "))}}}),ts=ce(es,[["__scopeId","data-v-a471509b"]]),os={props:{value:{type:Number,default:0},height:{type:String,default:"16"},title:{type:String,default:""},subtext:{type:String,default:""},tooltipText:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:1},formatFunction:{type:Function,default:e=>e}},computed:{parsedProgressText(){const e=Math.max(this.min,Math.min(this.max,this.value));return console.log(e),e?`${this.formatFunction(this.value)} ${this.subtext}`:""}}},ss=z()({name:"VCardActions",props:ue(),setup(e,p){let{slots:n}=p;return rt({VBtn:{slim:!0,variant:"text"}}),j(()=>{var t;return a("div",{class:["v-card-actions",e.class],style:e.style},[(t=n.default)==null?void 0:t.call(n)])}),{}}}),as=J({opacity:[Number,String],...ue(),...ge()},"VCardSubtitle"),ns=z()({name:"VCardSubtitle",props:as(),setup(e,p){let{slots:n}=p;return j(()=>a(e.tag,{class:["v-card-subtitle",e.class],style:[{"--v-card-subtitle-opacity":e.opacity},e.style]},n)),{}}}),ls=yo("v-card-title"),is=J({appendAvatar:String,appendIcon:le,prependAvatar:String,prependIcon:le,subtitle:[String,Number],title:[String,Number],...ue(),...De()},"VCardItem"),rs=z()({name:"VCardItem",props:is(),setup(e,p){let{slots:n}=p;return j(()=>{var P;const t=!!(e.prependAvatar||e.prependIcon),y=!!(t||n.prepend),b=!!(e.appendAvatar||e.appendIcon),d=!!(b||n.append),u=!!(e.title!=null||n.title),w=!!(e.subtitle!=null||n.subtitle);return a("div",{class:["v-card-item",e.class],style:e.style},[y&&a("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?a(Pe,{key:"prepend-defaults",disabled:!t,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):a($,null,[e.prependAvatar&&a(Ze,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&a(qe,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),a("div",{class:"v-card-item__content"},[u&&a(ls,{key:"title"},{default:()=>{var x;return[((x=n.title)==null?void 0:x.call(n))??e.title]}}),w&&a(ns,{key:"subtitle"},{default:()=>{var x;return[((x=n.subtitle)==null?void 0:x.call(n))??e.subtitle]}}),(P=n.default)==null?void 0:P.call(n)]),d&&a("div",{key:"append",class:"v-card-item__append"},[n.append?a(Pe,{key:"append-defaults",disabled:!b,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):a($,null,[e.appendIcon&&a(qe,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&a(Ze,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),ds=J({opacity:[Number,String],...ue(),...ge()},"VCardText"),ct=z()({name:"VCardText",props:ds(),setup(e,p){let{slots:n}=p;return j(()=>a(e.tag,{class:["v-card-text",e.class],style:[{"--v-card-text-opacity":e.opacity},e.style]},n)),{}}}),cs=J({appendAvatar:String,appendIcon:le,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:le,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...Mt(),...ue(),...De(),...Lt(),...Ot(),...Gt(),...Ut(),...Et(),...Ft(),...Bt(),...ge(),...Rt(),...Nt({variant:"elevated"})},"VCard"),ut=z()({name:"VCard",directives:{Ripple:yt},props:cs(),setup(e,p){let{attrs:n,slots:t}=p;const{themeClasses:y}=Vt(e),{borderClasses:b}=kt(e),{colorClasses:d,colorStyles:u,variantClasses:w}=St(e),{densityClasses:P}=dt(e),{dimensionStyles:x}=Pt(e),{elevationClasses:C}=xt(e),{loaderClasses:V}=Ct(e),{locationStyles:k}=Tt(e),{positionClasses:F}=wt(e),{roundedClasses:I}=It(e),R=At(e,n),L=N(()=>e.link!==!1&&R.isLink.value),T=N(()=>!e.disabled&&e.link!==!1&&(e.link||R.isClickable.value));return j(()=>{const O=L.value?"a":e.tag,Y=!!(t.title||e.title!=null),_=!!(t.subtitle||e.subtitle!=null),Z=Y||_,E=!!(t.append||e.appendAvatar||e.appendIcon),te=!!(t.prepend||e.prependAvatar||e.prependIcon),K=!!(t.image||e.image),g=Z||te||E,o=!!(t.text||e.text!=null);return $t(a(O,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":T.value},y.value,b.value,d.value,P.value,C.value,V.value,F.value,I.value,w.value,e.class],style:[u.value,x.value,k.value,e.style],href:R.href.value,onClick:T.value&&R.navigate,tabindex:e.disabled?-1:void 0},{default:()=>{var r;return[K&&a("div",{key:"image",class:"v-card__image"},[t.image?a(Pe,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):a(ko,{key:"image-img",cover:!0,src:e.image},null)]),a(Ht,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:t.loader}),g&&a(rs,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:t.item,prepend:t.prepend,title:t.title,subtitle:t.subtitle,append:t.append}),o&&a(ct,{key:"text"},{default:()=>{var v;return[((v=t.text)==null?void 0:v.call(t))??e.text]}}),(r=t.default)==null?void 0:r.call(t),t.actions&&a(ss,null,{default:t.actions}),Wt(T.value,"v-card")]}}),[[Dt("ripple"),T.value&&e.ripple]])}),{}}}),us={class:"progress-insight"},ps={key:0,class:"progress-insight__title"},ms={class:"progress-insight__progress-text"};function vs(e,p,n,t,y,b){return l(),f("div",us,[a(ut,{class:"progress-insight__card"},{default:h(()=>[n.title?(l(),f("h3",ps,S(n.title),1)):G("",!0),a(Ce,{activator:"parent",location:"bottom",disabled:!n.tooltipText},{activator:h(({props:d})=>[a(zt,q(d,{height:n.height,"model-value":n.value,max:n.max,class:"progress-insight__progress-bar"}),null,16,["height","model-value","max"])]),default:h(()=>[D(S(n.tooltipText),1)]),_:1},8,["disabled"]),c("div",ms,S(b.parsedProgressText),1)]),_:1})])}const bs=ce(os,[["render",vs],["__scopeId","data-v-26a03cf6"]]),fs={props:{proposal:{type:Object,default:()=>({})}},computed:{parsedRoadmap(){var t,y,b,d,u;const e=(t=this.proposal)!=null&&t.voteStartTimestamp?new Date(Number(this.proposal.voteStartTimestamp)*1e3):null,p=(y=this.proposal)!=null&&y.voteEndTimestamp?new Date(Number(this.proposal.voteEndTimestamp)*1e3):null,n=(b=this.proposal)!=null&&b.executedTimestamp?new Date(Number(this.proposal.executedTimestamp)*1e3):null;return[{title:"Proposal on Chain",subtitle:"Start of Voting Period",icon:"material-symbols:how-to-vote-outline",date:e?Ve(e):((d=this.proposal)==null?void 0:d.voteStart)||"",hasStarted:e&&new Date>e},{title:"Proposal Results",subtitle:"End of Voting Period",icon:"material-symbols:ballot-outline",date:p?Ve(p):((u=this.proposal)==null?void 0:u.voteEnd)||"",hasStarted:p&&new Date>p},{title:"Proposal Execution",subtitle:"Enactment on Chain",icon:"material-symbols:rocket-launch-outline-rounded",date:n?Ve(n):"",hasStarted:n&&new Date>n}]},isStateExecuted(){var e;return((e=this.proposal)==null?void 0:e.state)===me.Executed}},methods:{classes(e){return["proposal-roadmap__item",{"proposal-roadmap__item--inactive":!e.hasStarted}]}}},_s={class:"proposal-roadmap"},gs={key:0,class:"proposal-roadmap__date"},hs={class:"proposal-roadmap__container"},ys={class:"proposal-roadmap__icon"},Vs={class:"proposal-roadmap__details"},ks={class:"proposal-roadmap__title"},Ss={class:"proposal-roadmap__subtitle"};function Ps(e,p,n,t,y,b){const d=$e("Icon");return l(),f("div",_s,[(l(!0),f($,null,ae(b.parsedRoadmap,u=>(l(),B(ut,{key:u.title,class:be(b.classes(u)),flat:""},{default:h(()=>[u.date?(l(),f("div",gs,S(u.date),1)):G("",!0),b.isStateExecuted&&!u.date?(l(),B(_e,{key:1,indeterminate:"",color:"primary",height:"2",width:"2",class:"mb-2 d-flex mx-auto",rounded:""})):G("",!0),c("div",hs,[c("div",ys,[a(d,{icon:u.icon,width:"1.4rem"},null,8,["icon"])]),c("div",Vs,[c("div",ks,S(u.title),1),c("div",Ss,S(u.subtitle),1)])])]),_:2},1032,["class"]))),128))])}const xs=ce(fs,[["render",Ps],["__scopeId","data-v-11a6a676"]]),Ne=Symbol.for("vuetify:v-tabs"),Cs=J({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Ie(Xt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),ve=z()({name:"VTab",props:Cs(),setup(e,p){let{slots:n,attrs:t}=p;const{textColorClasses:y,textColorStyles:b}=jt(e,"sliderColor"),d=H(),u=H(),w=N(()=>e.direction==="horizontal"),P=N(()=>{var C,V;return((V=(C=d.value)==null?void 0:C.group)==null?void 0:V.isSelected.value)??!1});function x(C){var k,F;let{value:V}=C;if(V){const I=(F=(k=d.value)==null?void 0:k.$el.parentElement)==null?void 0:F.querySelector(".v-tab--selected .v-tab__slider"),R=u.value;if(!I||!R)return;const L=getComputedStyle(I).color,T=I.getBoundingClientRect(),O=R.getBoundingClientRect(),Y=w.value?"x":"y",_=w.value?"X":"Y",Z=w.value?"right":"bottom",E=w.value?"width":"height",te=T[Y],K=O[Y],g=te>K?T[Z]-O[Z]:T[Y]-O[Y],o=Math.sign(g)>0?w.value?"right":"bottom":Math.sign(g)<0?w.value?"left":"top":"center",v=(Math.abs(g)+(Math.sign(g)<0?T[E]:O[E]))/Math.max(T[E],O[E])||0,A=T[E]/O[E]||0,M=1.5;qt(R,{backgroundColor:[L,"currentcolor"],transform:[`translate${_}(${g}px) scale${_}(${A})`,`translate${_}(${g/M}px) scale${_}(${(v-1)/M+1})`,"none"],transformOrigin:Array(3).fill(o)},{duration:225,easing:Jt})}}return j(()=>{const C=de.filterProps(e);return a(de,q({symbol:Ne,ref:d,class:["v-tab",e.class],style:e.style,tabindex:P.value?0:-1,role:"tab","aria-selected":String(P.value),active:!1},C,t,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":x}),{...n,default:()=>{var V;return a($,null,[((V=n.default)==null?void 0:V.call(n))??e.text,!e.hideSlider&&a("div",{ref:u,class:["v-tab__slider",y.value],style:b.value},null)])}})}),Yt({},d)}}),Ts=J({...Ie(xo(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),ws=z()({name:"VTabsWindow",props:Ts(),emits:{"update:modelValue":e=>!0},setup(e,p){let{slots:n}=p;const t=Qt(Ne,null),y=we(e,"modelValue"),b=N({get(){var d;return y.value!=null||!t?y.value:(d=t.items.value.find(u=>t.selected.value.includes(u.id)))==null?void 0:d.value},set(d){y.value=d}});return j(()=>{const d=tt.filterProps(e);return a(tt,q({_as:"VTabsWindow"},d,{modelValue:b.value,"onUpdate:modelValue":u=>b.value=u,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),Is=J({...Co()},"VTabsWindowItem"),As=z()({name:"VTabsWindowItem",props:Is(),setup(e,p){let{slots:n}=p;return j(()=>{const t=ot.filterProps(e);return a(ot,q({_as:"VTabsWindowItem"},t,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function $s(e){return e?e.map(p=>eo(p)?p:{text:p,value:p}):[]}const Ds=J({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Vo({mandatory:"force",selectedClass:"v-tab-item--selected"}),...De(),...ge()},"VTabs"),Ns=z()({name:"VTabs",props:Ds(),emits:{"update:modelValue":e=>!0},setup(e,p){let{attrs:n,slots:t}=p;const y=we(e,"modelValue"),b=N(()=>$s(e.items)),{densityClasses:d}=dt(e),{backgroundColorClasses:u,backgroundColorStyles:w}=Zt(se(e,"bgColor")),{scopeId:P}=Kt();return rt({VTab:{color:se(e,"color"),direction:se(e,"direction"),stacked:se(e,"stacked"),fixed:se(e,"fixedTabs"),sliderColor:se(e,"sliderColor"),hideSlider:se(e,"hideSlider")}}),j(()=>{const x=Qe.filterProps(e),C=!!(t.window||e.items.length>0);return a($,null,[a(Qe,q(x,{modelValue:y.value,"onUpdate:modelValue":V=>y.value=V,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},d.value,u.value,e.class],style:[{"--v-tabs-height":to(e.height)},w.value,e.style],role:"tablist",symbol:Ne},P,n),{default:()=>{var V;return[((V=t.default)==null?void 0:V.call(t))??b.value.map(k=>{var F;return((F=t.tab)==null?void 0:F.call(t,{item:k}))??a(ve,q(k,{key:k.text,value:k.value}),{default:t[`tab.${k.value}`]?()=>{var I;return(I=t[`tab.${k.value}`])==null?void 0:I.call(t,{item:k})}:void 0})})]}}),C&&a(ws,q({modelValue:y.value,"onUpdate:modelValue":V=>y.value=V,key:"tabs-window"},P),{default:()=>{var V;return[b.value.map(k=>{var F;return((F=t.item)==null?void 0:F.call(t,{item:k}))??a(As,{value:k.value},{default:()=>{var I;return(I=t[`item.${k.value}`])==null?void 0:I.call(t,{item:k})}})}),(V=t.window)==null?void 0:V.call(t)]}})])}),{}}}),Rs={key:0,class:"proposal-detail"},Bs={class:"section-bottom"},Fs={class:"main_card section-bottom--left"},Es={key:0},Us={class:"code_block"},Gs={class:"text-primary"},Os={class:"d-flex align-center justify-space-between"},Ls={key:3,class:"code_block"},Ms={key:1,class:"code_block"},Ws={class:"section-bottom--right"},Hs={class:"section-bottom__outcome"},zs={key:2,class:"text-center mt-6 align-center"},js=Ae({__name:"[proposalId]",emits:["updateBreadcrumbs"],setup(e,{emit:p}){const n=p,t=xe(),y=oo(),b=y.params.proposalId,[d,u]=b.split("-"),w=y.params.fundSlug,P=H(!1),x=H([]);console.log("proposal",u),console.log("fundSlug",w);const C=H({}),V=o=>{C.value[o]=!(C.value[o]??!1)},{selectedFundSlug:k}=so(xe()),F=[{title:"Governance",disabled:!1,to:`/details/${k.value}/governance`},{title:"Proposal Details",disabled:!0,to:`/details/${k.value}/governance/proposal/${d}-${u}`}],I=H("description"),R=at(),L=lo(),T=H(!0),O=N(()=>{var o;return(o=_.value)==null?void 0:o.voteSubmissions}),Y=N(()=>{var r,v;const o=(r=t.activeAccountAddress)==null?void 0:r.toLowerCase();return o?(v=O.value)==null?void 0:v.find(A=>A.proposer.toLowerCase()===o):void 0}),_=N(()=>{console.debug("PROPOSAL_ID",u);const o=R.getProposal(t.selectedFundChain,t.fundAddress,u);if(o)return console.debug("PROPOSAL_ID fetched",o),o}),Z=N(()=>{var A,M,W,oe,ee;const o=((M=(A=_.value)==null?void 0:A.calldataTypes)==null?void 0:M.indexOf(re.FUND_SETTINGS))??-1,r=((oe=(W=_.value)==null?void 0:W.calldataTypes)==null?void 0:oe.lastIndexOf(re.FUND_SETTINGS))??-1,v=(ee=_.value)==null?void 0:ee.calldatasDecoded;return v!=null&&v.length&&o!==r&&o!==-1?(console.debug("removing default fund settings by index",o),[...v.slice(0,o),...v.slice(o+1)]):v}),E=o=>{console.log("parseNavEntries calldataDecoded",o==null?void 0:o.calldataDecoded);const r=o==null?void 0:o.calldataDecoded,v=[],A=(r==null?void 0:r.navUpdateData)??[];for(const[M,W]of A.entries())v.push(io(M,W));return v},te=N(()=>{var o,r,v,A;return{targets:((o=_.value)==null?void 0:o.targets)??[],values:((r=_.value)==null?void 0:r.values)??[],signatures:((v=_.value)==null?void 0:v.signatures)??[],calldatas:((A=_.value)==null?void 0:A.calldatas)??[]}});lt(()=>_.value,o=>{o&&o.calldatas.forEach((r,v)=>{C.value[v]=!1})},{immediate:!0});const K=async()=>{T.value=!0,await new Promise(o=>setTimeout(o,2e3)),await R.fetchGovernanceProposal(u)};it(async()=>{var o,r,v;n("updateBreadcrumbs",F),x.value=[];try{console.warn("START FETCHINGF",u),await R.fetchGovernanceProposal(u),console.warn("STOP FETCHINGF",u)}catch{}console.log("gov prop fetched",_.value),_.value&&(console.warn("proposal.value?.calldatasDecoded",(o=_.value)==null?void 0:o.calldatasDecoded),x.value=((v=(r=_.value)==null?void 0:r.calldatasDecoded)==null?void 0:v.map(A=>(console.warn("parseNavEntries(calldata)",A,E(A)),E(A))))??[])}),ao(()=>{n("updateBreadcrumbs",[]),T.value=!1});const g=N(()=>{const o=L.getActionState("fetchGovernanceProposalAction");if(!o)return!1;const r=o.includes(ye.Loading),v=!o.includes(ye.Success)&&!o.includes(ye.Error);return r||v});return(o,r)=>{var m;const v=Xo,A=bo,M=fo,W=_o,oe=ts,ee=bs,pe=xs;return(m=s(_))!=null&&m.proposalId?(l(),f("div",Rs,[a(v,{proposal:s(_),"active-user-vote-submission":s(Y),"loading-proposal-vote-submissions":s(g),onVoteSuccess:K},null,8,["proposal","active-user-vote-submission","loading-proposal-vote-submissions"]),c("div",Bs,[c("div",Fs,[a(Ns,{modelValue:s(I),"onUpdate:modelValue":r[0]||(r[0]=U=>fe(I)?I.value=U:null),class:"section-bottom__tabs"},{default:h(()=>[a(ve,{value:"description",class:"section-bottom__tab"},{default:h(()=>r[2]||(r[2]=[D(" Description ")])),_:1}),a(ve,{value:"executableCode",class:"section-bottom__tab"},{default:h(()=>r[3]||(r[3]=[D(" Executable Code ")])),_:1}),a(ve,{value:"voteSubmissions",class:"section-bottom__tab"},{default:h(()=>r[4]||(r[4]=[D(" Vote Submissions ")])),_:1})]),_:1},8,["modelValue"]),a(ct,{class:"section-bottom__tab-content position-relative"},{default:h(()=>{var U;return[s(I)==="description"?(l(),f($,{key:0},[D(S(((U=s(_))==null?void 0:U.description)??""),1)],64)):s(I)==="executableCode"?(l(),f($,{key:1},[a(st,{modelValue:s(P),"onUpdate:modelValue":r[1]||(r[1]=i=>fe(P)?P.value=i:null),label:"Raw",class:"section-bottom__show_raw_calldatas_switch",color:"primary","hide-details":""},null,8,["modelValue"]),s(P)?(l(),f("div",Es,[c("div",Us,S(s(Ke)(s(te))),1)])):(l(!0),f($,{key:1},ae(s(Z),(i,Q)=>{var Re,Be,Fe,Ee;return l(),f("div",{key:Q,class:"mb-6"},[c("strong",Gs,S(Q+1)+"#",1),c("div",null,[r[5]||(r[5]=c("strong",null,"Contract:",-1)),D(" "+S((i==null?void 0:i.contractName)??"N/A"),1)]),c("div",null,[r[6]||(r[6]=c("strong",null,"Function:",-1)),D(" "+S((i==null?void 0:i.functionName)??"N/A"),1)]),c("div",null,[r[7]||(r[7]=c("strong",null,"Target:",-1)),D(" "+S(((Be=(Re=s(_))==null?void 0:Re.targets)==null?void 0:Be[Q])??"N/A"),1)]),c("div",null,[r[8]||(r[8]=c("strong",null,"Value:",-1)),D(" "+S(((Ee=(Fe=s(_))==null?void 0:Fe.values)==null?void 0:Ee[Q])??"N/A"),1)]),a(W,{"grow-column1":!0,"is-expanded":""},{title:h(()=>[c("div",Os,[r[9]||(r[9]=c("div",null," Calldata ",-1)),c("div",null,[a(st,{modelValue:s(C)[Q],"onUpdate:modelValue":ie=>s(C)[Q]=ie,label:"Raw",color:"primary","hide-details":"",onClick:no(ie=>V(Q),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])])])]),body:h(()=>{var ie,Ue,Ge,Oe,Le,Me,We,He,ze,je,Ye;return[s(C)[Q]?(l(),f("div",Ms,S((i==null?void 0:i.calldataDecoded)||(i==null?void 0:i.calldata)),1)):(l(),f($,{key:0},[(i==null?void 0:i.calldataType)===s(re).NAV_UPDATE?(l(),B(A,{key:0,"fund-chain-id":s(t).selectedFundChain,"fund-address":s(t).fundAddress,"fund-contract-base-token-balance":Number((ie=s(t).fund)==null?void 0:ie.fundContractBaseTokenBalance),"safe-contract-base-token-balance":Number((Ue=s(t).fund)==null?void 0:Ue.safeContractBaseTokenBalance),"fee-balance":Number((Ge=s(t).fund)==null?void 0:Ge.feeBalance),"safe-address":(Oe=s(t).fund)==null?void 0:Oe.safeAddress,"base-symbol":(Le=s(t).fund)==null?void 0:Le.baseToken.symbol,"base-decimals":(Me=s(t).fund)==null?void 0:Me.baseToken.decimals,methods:s(x)[Q],"show-summary-row":"","show-simulated-nav":"","show-base-token-balances":"",idx:"[proposalId]"},null,8,["fund-chain-id","fund-address","fund-contract-base-token-balance","safe-contract-base-token-balance","fee-balance","safe-address","base-symbol","base-decimals","methods"])):(i==null?void 0:i.calldataType)===s(re).PERMISSIONS?(l(),f($,{key:1},[((We=i==null?void 0:i.calldataDecoded)==null?void 0:We.role)!==void 0?(l(),B(M,{key:0},{default:h(()=>{var Xe;return[c("strong",null,"Role ID: "+S((Xe=i==null?void 0:i.calldataDecoded)==null?void 0:Xe.role),1)]}),_:2},1024)):G("",!0),a(Po,{"function-name":i==null?void 0:i.functionName,"calldata-decoded":i==null?void 0:i.calldataDecoded,"chain-id":(He=s(t).fund)==null?void 0:He.chainId},null,8,["function-name","calldata-decoded","chain-id"])],64)):(i==null?void 0:i.calldataType)===s(re).FUND_SETTINGS?(l(),f($,{key:2},[i!=null&&i.calldataDecoded&&((je=(ze=s(t))==null?void 0:ze.fund)!=null&&je.chainId)?(l(),B(So,{key:0,"calldata-decoded":i==null?void 0:i.calldataDecoded,"chain-id":(Ye=s(t).fund)==null?void 0:Ye.chainId},null,8,["calldata-decoded","chain-id"])):G("",!0)],64)):(l(),f("div",Ls,[i!=null&&i.calldataDecoded?(l(),f($,{key:0},[D(S(s(Ke)(i==null?void 0:i.calldataDecoded)),1)],64)):(l(),f($,{key:1},[D(" Calldata could not be decoded. Check raw data. ")],64))]))],64))]}),_:2},1024)])}),128))],64)):s(I)==="voteSubmissions"?(l(),B(oe,{key:2,items:s(O),loading:s(g)},null,8,["items","loading"])):G("",!0)]}),_:1})]),c("div",Ws,[a(W,{title:"Outcome",class:"data_row_card","is-expanded":""},{body:h(()=>{var U,i;return[c("div",Hs,[a(ee,{title:"Approval Rate",value:(U=s(_))==null?void 0:U.approval,"format-function":s(et),subtext:"Approval","tooltip-text":`${s(_).forVotesFormatted} of ${s(_).totalVotesFormatted}`},null,8,["value","format-function","tooltip-text"]),a(ee,{title:"Participation Rate",value:(i=s(_))==null?void 0:i.participation,"format-function":s(et),subtext:"Support","tooltip-text":`${s(_).totalVotesFormatted} of ${s(_).totalSupplyFormatted}`},null,8,["value","format-function","tooltip-text"])])]}),_:1}),a(W,{title:"Roadmap",class:"data_row_card","is-expanded":""},{body:h(()=>[a(pe,{proposal:s(_)},null,8,["proposal"])]),_:1})])])])):s(g)?(l(),B(_e,{key:1,class:"loading_spinner",size:"50",width:"3",indeterminate:""})):(l(),f("div",zs," Oops, proposal data is not available. "))}}}),La=ce(js,[["__scopeId","data-v-1e987f2d"]]);export{La as default};
