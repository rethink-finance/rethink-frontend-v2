import ae from"./DAKP5pNJ.js";import oe from"./H7YDYKaw.js";import re from"./C3wRWmyj.js";import{d as ne,u as ie,h as _,r as u,f as p,e as d,a as i,cF as A,c as b,b as o,i as x,w as a,q as c,G as B,V as y,d2 as ue,d3 as ce,d4 as fe,Q as z,z as F,c8 as K,o as r,_ as me}from"./_BmmGIGi.js";import{f as V}from"./CKS8D1OD.js";import{b as j}from"./D5-R3KnC.js";import{V as G}from"./D_-Msn7h.js";import{b as H}from"./BlSCcxsD.js";import{V as ve}from"./C7URMWzZ.js";import{V as pe}from"./DtO3A6PH.js";import{V as Q}from"./E_YhHG9T.js";import{V as _e,a as he}from"./BWHNz5Ry.js";const we={key:0,class:"section_whitelist"},Ae={class:"header"},be={class:"header__actions"},ye={key:0,class:"header__new-address"},Ve={class:"header__actions"},ge={key:0,class:"header__new-address"},ke={class:"header__actions"},xe={class:"address__text"},Ce={key:0,class:"address__state"},Ne={key:0,class:"address__state__deleted"},Ee={key:1,class:"address__state__new"},Le={key:3,class:"section_whitelist__no_data"},Be={key:1},Te=ne({__name:"SectionWhitelist",props:{modelValue:{type:Array,default:()=>[]},whitelistEnabled:{type:Boolean,default:!1},isEditable:{type:Boolean,default:!0}},emits:["update:modelValue","update:whitelistEnabled"],setup(w,{emit:J}){const T=ie(),C=w,S=J,f=_({get:()=>(C==null?void 0:C.modelValue)||[],set:s=>{S("update:modelValue",s)}}),O=_({get:()=>C.whitelistEnabled||!1,set:s=>{S("update:whitelistEnabled",s)}}),X=u(!1),N=u(""),E=u(1),Y=_(()=>{const s=f.value.length;return s==null?0:Math.ceil(s/10)}),U=u(),I=u(),g=u(!1),h=u(!1),n=u(""),R=u([]),k=u(!1),D=_(()=>[V.isValidAddress,V.required,V.notSameAs(f.value.map(s=>s.address),"This address is already in the whitelist")]),q=_(()=>{const s=n.value.split(/\r?\n/).map(l=>l),e=s.reduce((l,v)=>(l[v]=(l[v]||0)+1,l),{}),m=s.filter(l=>e[l]>=2);return[V.isValidAddress,V.required,V.notSameAs(m,"This address is already in the whitelist")]}),Z=_(()=>[{title:"",key:"index",sortable:!0},{title:"",key:"address",sortable:!0},{title:"",key:"delete",align:"end"}]),ee=({item:s})=>s.deleted?{class:"tr_deleted"}:s.isNew?{class:"tr_is_new"}:{},W=_(()=>D.value.every(s=>s(n.value)===!0)),se=_(()=>{const s=n.value.split(/\r?\n/).map(l=>l),e=s.every(l=>q.value.every(v=>v(l)===!0)),m=s.map(l=>{const v=q.value.map(t=>t(l)).filter(t=>typeof t=="string");return v.length>0?{address:l,errors:v}:null}).filter(l=>l!==null);return R.value=m.map(l=>l.address?l.address+": "+l.errors.join(", "):"List is empty or contains empty lines"),e}),te=()=>{k.value=!0},$=()=>{g.value=!g.value,h.value=!1},M=()=>{h.value=!h.value,g.value=!1,h.value&&(n.value="")},le=s=>{if(s.isNew){f.value=f.value.filter(e=>e.address!==s.address);return}s.deleted=!s.deleted},P=()=>{var s;try{const e={address:n.value,isNew:!0,deleted:!1};f.value=[...f.value,e],n.value="",(s=U.value)==null||s.resetValidation(),T.successToast("New address added to the whitelist.")}catch(e){console.log(e)}},de=()=>{var s;try{const e=n.value.split(/\r?\n/).map(m=>m);f.value=e.map(m=>({address:m,isNew:!0,deleted:!1})),n.value="",k.value=!1,(s=I.value)==null||s.resetValidation(),T.successToast("New addresses added to the whitelist."),h.value=!1}catch(e){console.log(e)}};return(s,e)=>{const m=ae,l=oe,v=re;return r(),p("div",null,[d(O)?(r(),p("div",we,[i("div",Ae,[i("div",be,[o(j,{modelValue:d(N),"onUpdate:modelValue":e[0]||(e[0]=t=>x(N)?N.value=t:null),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"]),w.isEditable?(r(),b(y,{key:0,color:"#ffffff",variant:"text",class:B({"v-btn--active":d(h)}),onClick:M},{default:a(()=>e[6]||(e[6]=[c(" Add Address List + ")])),_:1},8,["class"])):A("",!0),w.isEditable?(r(),b(y,{key:1,color:"#ffffff",variant:"text",class:B({"v-btn--active":d(g)}),onClick:$},{default:a(()=>e[7]||(e[7]=[c(" Add Address + ")])),_:1},8,["class"])):A("",!0)]),d(g)?(r(),p("div",ye,[o(G,{cols:"12"},{default:a(()=>[o(H,{class:"row-title"},{default:a(()=>e[8]||(e[8]=[i("div",{class:"label_required row-title__title"}," Enter New Address ",-1)])),_:1}),o(j,{ref_key:"newAddressInputRef",ref:U,modelValue:d(n),"onUpdate:modelValue":e[1]||(e[1]=t=>x(n)?n.value=t:null),label:"Address",variant:"outlined","single-line":"",rules:d(D),onKeydown:e[2]||(e[2]=ue(t=>d(W)?P():null,["enter"]))},null,8,["modelValue","rules"]),i("div",Ve,[o(y,{color:"red",variant:"text",onClick:$},{default:a(()=>e[9]||(e[9]=[c(" Cancel ")])),_:1}),o(y,{color:"#ffffff",variant:"outlined",disabled:!d(W),onClick:P},{default:a(()=>e[10]||(e[10]=[c(" Add Address ")])),_:1},8,["disabled"])])]),_:1})])):A("",!0)]),d(h)?(r(),p("div",ge,[o(G,{cols:"12"},{default:a(()=>[o(H,{class:"row-title"},{default:a(()=>e[11]||(e[11]=[i("div",{class:"label_required row-title__title"}," Enter New Addresses ",-1)])),_:1}),o(ve,{ref_key:"newAddressListInputRef",ref:I,modelValue:d(n),"onUpdate:modelValue":e[3]||(e[3]=t=>x(n)?n.value=t:null),label:"Addresses",variant:"outlined","single-line":"","error-messages":d(R)},null,8,["modelValue","error-messages"]),i("div",ke,[o(y,{color:"red",variant:"text",onClick:M},{default:a(()=>e[12]||(e[12]=[c(" Cancel ")])),_:1}),o(y,{color:"#ffffff",variant:"outlined",disabled:!d(se),onClick:te},{default:a(()=>e[13]||(e[13]=[c(" Add New Address List ")])),_:1},8,["disabled"])])]),_:1}),o(m,{modelValue:d(k),"onUpdate:modelValue":e[4]||(e[4]=t=>x(k)?k.value=t:null),title:"Heads Up!","confirm-text":"Add Address List","cancel-text":"Cancel",message:"By proceeding with <strong>'Add Address List'</strong>, all the previous addresses will be removed!",onConfirm:de},null,8,["modelValue"])])):A("",!0),d(X)?(r(),b(pe,{key:1,type:"table"})):d(f).length?(r(),b(he,{key:2,class:"section_whitelist__table",headers:d(Z),items:d(f),"cell-props":ee,search:d(N),"hide-default-header":"",hover:"","hide-actions":"","items-per-page":"10",page:d(E)},ce({"item.index":a(({index:t})=>[i("strong",{class:B(`td_index  ${w.isEditable?"":"disabled"}`)},K(t+1),3)]),"item.address":a(({item:t})=>[i("div",{class:B(`address ${w.isEditable?"":"disabled"}`)},[i("span",xe,K(t.address),1),t.deleted||t.isNew?(r(),p("div",Ce,[t.deleted?(r(),p("span",Ne,"Removed")):t.isNew?(r(),p("span",Ee,"Added")):A("",!0)])):A("",!0)],2)]),bottom:a(()=>[o(_e,{modelValue:d(E),"onUpdate:modelValue":e[5]||(e[5]=t=>x(E)?E.value=t:null),length:d(Y)},null,8,["modelValue","length"])]),_:2},[w.isEditable?{name:"item.delete",fn:a(({item:t})=>[o(l,{small:"",onClick:fe(L=>le(t),["stop"])},{default:a(()=>[t.deleted?(r(),b(Q,{key:0,activator:"parent",location:"bottom"},{default:a(()=>e[14]||(e[14]=[c(" Undo Delete ")])),activator:a(({props:L})=>[o(z,F({class:"icon_delete",icon:"mdi-arrow-u-left-top",color:"secondary"},L),null,16)]),_:1})):(r(),b(Q,{key:1,activator:"parent",location:"bottom"},{default:a(()=>e[15]||(e[15]=[c(" Delete Address ")])),activator:a(({props:L})=>[o(z,F({class:"icon_delete",icon:"mdi-delete",color:"error"},L),null,16)]),_:1}))]),_:2},1032,["onClick"])]),key:"0"}:void 0]),1032,["headers","items","search","page"])):(r(),p("div",Le,e[16]||(e[16]=[c(" Currently there are no addresses in the whitelist. "),i("br",null,null,-1),c(" This means that all addresses are allowed to participate in the vault. "),i("br",null,null,-1)])))])):(r(),p("div",Be,[o(v,{class:"info-box",info:`Whitelist is disabled. This means that anyone can deposit into the vault. <br>
                      If you want to enable the whitelist, please toggle the switch above. <br>
                      Whitelist is a list of addresses that are allowed to deposit into the vault.`})]))])}}}),Ke=me(Te,[["__scopeId","data-v-218330e6"]]);export{Ke as _};
