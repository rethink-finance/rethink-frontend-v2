import{_ as w}from"./CnMr6hsI.js";import{P as D,n as P}from"./sVzXeG17.js";import{V as B}from"./8pzO0o2T.js";import{d as F,f as l,b as y,a as o,w as i,cF as V,c8 as d,o as e,_ as U,g as $,d9 as I,h as v,c as p,e as s,cD as A,F as k,cB as _,p as f,y as L,er as R,es as M}from"./D3HDfnxy.js";import{r as z,t as b,d as C}from"./DmMfJ0RA.js";import{u as j}from"./CDIkowV_.js";import{a as O}from"./CgAV7UTW.js";import{V as T}from"./Cg7Ey17u.js";import{j as E,i as W,A as x}from"./CL_pIM7N.js";import"./DPhX8wWY.js";import"./cVa1OdO9.js";import"./Ce8rn2uW.js";import"./COuEhvrh.js";import"./C8Z2lGgf.js";import"./CJiquoOh.js";import"./BFVrtpKD.js";import"./DWe-URJs.js";import"./CH598blW.js";import"./DkcdTJJR.js";const K={class:"fund_name"},q=["src"],G={class:"title_wrapper"},H={class:"text-white"},J={key:0,class:"strategist_url"},Q=F({__name:"FundNameCell",props:{image:{type:String,default:""},title:{type:String,default:""},strategistName:{type:String,default:""},strategistUrl:{type:String,default:""}},setup(a){const g=a;return(h,c)=>(e(),l("div",K,[y(B,{size:"3.75rem",rounded:!0,class:"fund_name__avatar"},{default:i(()=>[o("img",{cover:"",src:g.image},null,8,q)]),_:1}),o("div",G,[o("h4",H,d(a.title),1),a.strategistName?(e(),l("div",J,[o("h5",null,"by "+d(a.strategistName),1)])):V("",!0)])]))}}),X=U(Q,[["__scopeId","data-v-851b8ac8"]]),Y={class:"text-white"},Z={key:0,class:"nav_usd_value"},tt={key:1,class:"nav_entries__no_data"},et=F({__name:"TableFunds",props:{items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(a){const{getFundDetailsUrl:g}=j(),h=$(),c=I(),N=v(()=>[{title:"Vault Name",key:"name",sortable:!1,maxWidth:300,minWidth:200},{title:"Chain",key:"chainShort",width:62,maxWidth:62,align:"end"},{title:"Current Value",key:"totalSimulatedNavUSD",align:"end"},{title:"Inception",key:"inceptionDate",value:r=>r.inceptionDate,align:"end"},{title:"Cumulative",key:"cumulativeReturnPercent",align:"end"},{title:"Position Types",key:"positionTypeCounts",align:"end"}]),S=(r,n)=>{const u=r.target;if(u.tagName.toLowerCase()==="a"||u.closest("a"))return;const t=g(n.item.chainId,n.item.fundToken.symbol,n.item.address);r.button===1||r.metaKey||r.ctrlKey?window.open(t,"_blank"):h.push(t)};return(r,n)=>{const u=w;return a.items.length||a.loading?(e(),p(O,{key:0,class:"table_all_funds",headers:s(N),hover:"",items:a.items,loading:a.loading&&a.items.length===0,"loading-text":"Loading OIVs","items-per-page":"-1","onMousedown:row":S},{"item.name":i(({item:t})=>[y(X,{image:t.photoUrl,title:t.title,"strategist-name":t.strategistName,"strategist-url":t.strategistUrl},null,8,["image","title","strategist-name","strategist-url"])]),"item.chainShort":i(({item:t})=>[y(u,{"chain-short":t.chainShort,class:"mr-2"},null,8,["chain-short"])]),"item.totalSimulatedNavUSD":i(({item:t})=>[o("div",{class:k({"justify-center":t.isNavUpdatesLoading})},[t.isNavUpdatesLoading?(e(),p(A,{key:0,size:"18",width:"2",indeterminate:""})):!t.totalSimulatedNav&&!t.lastNAVUpdateTotalNAV?(e(),l(_,{key:1},[f(" N/A ")],64)):(e(),l(_,{key:2},[t.totalSimulatedNav&&t.totalSimulatedNavCalculatedAt?(e(),p(T,{key:0,disabled:!s(c).isManageMode,location:"bottom"},{activator:i(({props:m})=>[o("div",L({class:"d-flex flex-column"},m),[o("div",Y,d(s(b)(s(C)(t.totalSimulatedNav||t.lastNAVUpdateTotalNAV,t.baseToken.decimals,!1,!1))+" "+t.baseToken.symbol),1),t.totalSimulatedNavUSD?(e(),l("div",Z," $"+d(s(b)(t.totalSimulatedNavUSD)),1)):V("",!0)],16)]),default:i(()=>[n[0]||(n[0]=f(" Calculated on ")),o("strong",null,d(t.totalSimulatedNavCalculatedAt),1)]),_:2},1032,["disabled"])):(e(),p(T,{key:1,location:"bottom",disabled:!s(c).isManageMode},{activator:i(({props:m})=>[o("span",R(M(m)),d(s(b)(s(C)(t.totalSimulatedNav||t.lastNAVUpdateTotalNAV,t.baseToken.decimals))+" "+t.baseToken.symbol),17)]),default:i(()=>{var m;return[o("strong",null,[((m=t==null?void 0:t.navUpdates)==null?void 0:m.length)>0?(e(),l(_,{key:0},[f(" Based on the last NAV update ")],64)):(e(),l(_,{key:1},[f(" Based on the current NAV methods. ")],64))])]}),_:2},1032,["disabled"]))],64))],2)]),"item.cumulativeReturnPercent":i(({item:t})=>[o("div",{class:k({"justify-center":t.isNavUpdatesLoading})},[t.isNavUpdatesLoading?(e(),p(A,{key:0,size:"18",width:"2",indeterminate:""})):(e(),l("div",{key:1,class:k(s(P)(t.cumulativeReturnPercent))},d(s(z)(t.cumulativeReturnPercent,!0)??"N/A"),3))],2)]),"item.positionTypeCounts":i(({item:t})=>[y(D,{"position-type-counts":t.positionTypeCounts??[],class:"position_types_bar"},null,8,["position-type-counts"])]),bottom:i(()=>n[1]||(n[1]=[])),_:2},1032,["headers","items","loading"])):a.items.length===0&&!a.loading?(e(),l("div",tt," No OIVs available. ")):V("",!0)}}}),at=U(et,[["__scopeId","data-v-702581bd"]]),st={class:"discover"},ot={key:0,class:"w-100 d-flex justify-center flex-column"},Vt={__name:"index",setup(a){const g=v(()=>h.funds),h=E(),c=W(),N=v(()=>c.isActionState("fetchFundsAction",x.Loading)),S=v(()=>c.isActionState("fetchFundsAction",x.Error));return console.log("on created"),h.fetchFunds(),(r,n)=>{const u=at;return e(),l("div",st,[s(S)?(e(),l("div",ot,n[0]||(n[0]=[o("h3",null,"Oops, something went wrong while getting OIVs data",-1),o("span",null," Maybe the current RPC is down? ",-1)]))):(e(),p(u,{key:1,loading:s(N),items:s(g)},null,8,["loading","items"]))])}}};export{Vt as default};
