import j from"./BNLVskQq.js";import q from"./CZgmxcej.js";import{d as M,d9 as G,h as g,en as R,f,a as c,cB as Y,cY as Z,c as F,w as A,b as m,F as J,c8 as N,V as K,o as d,_ as V,cF as b,cZ as Q,eo as X,ca as tt,ep as et,r as st,cf as P,e as n,eq as at,cD as nt,p as S}from"./D3HDfnxy.js";import{u as ot,i as rt,A as ct}from"./CL_pIM7N.js";import{_ as it}from"./D6l9HyL_.js";import{V as lt}from"./8pzO0o2T.js";import{V as w}from"./D3jptR6C.js";import"./DmMfJ0RA.js";import"./cVa1OdO9.js";import"./Ce8rn2uW.js";import"./DkcdTJJR.js";import"./DPhX8wWY.js";const dt={class:"details_nav_container"},ut={class:"details_nav"},_t=M({__name:"Navigation",props:{routes:{},fundDetailsRoute:{}},setup(k){const o=k,a=R(),v=G(),_=(i="",t=!0)=>t?(a==null?void 0:a.path)===i:a==null?void 0:a.path.startsWith(i),h=(i=!1,t="#77839f")=>i?"primary":t,p=g(()=>{const i=[`${o.fundDetailsRoute}/flows`,`${o.fundDetailsRoute}/execution-app`];return o.routes.map(t=>{const s=i.includes(t.to)?!v.isManageMode:!1;let e;return t.exactMatch?e=_(t.to,!0):_(t.matchPrefix,!1)||_(t.to,!0)?e=!0:e=!1,{...t,isActive:e,pathColor:h(e,t.color),target:t.isExternal?"_blank":"",isHidden:s}}).filter(t=>!t.isHidden)});return(i,t)=>{const s=it;return d(),f("div",dt,[c("div",ut,[t[0]||(t[0]=c("div",{class:"overlay-container"},null,-1)),(d(!0),f(Y,null,Z(p.value,e=>(d(),F(s,{key:e.to,to:e.to,class:"link"},{default:A(()=>[m(K,{class:"nav-link",variant:"plain",active:e.isActive,color:e.pathColor},{default:A(()=>[c("div",{class:J({"title-box":e.isActive})},N(e.title),3)]),_:2},1032,["active","color"])]),_:2},1032,["to"]))),128))])])}}}),pt=V(_t,[["__scopeId","data-v-2ce73559"]]),mt={key:0,class:"fund_name"},ft=["src"],ht={class:"fund_name__title"},vt={key:0,class:"fund_name__title"},gt={key:1,class:"fund_name__subtitle"},bt=["href"],xt=M({__name:"FundHeader",props:{fund:{},breadcrumbItems:{}},setup(k){return(o,a)=>{var v,_,h,p,i;return o.breadcrumbItems.length===0?(d(),f("div",mt,[m(lt,{class:"fund_name__avatar",rounded:!1,size:"3.75rem"},{default:A(()=>[c("img",{src:o.fund.photoUrl,class:"fund_name__avatar_img",alt:"fund cover image"},null,8,ft)]),_:1}),c("div",ht,[c("p",null,N((v=o.fund)==null?void 0:v.title),1)]),(_=o.fund)!=null&&_.strategistName?(d(),f("div",vt,a[0]||(a[0]=[c("p",null," | ",-1)]))):b("",!0),(h=o.fund)!=null&&h.strategistName?(d(),f("div",gt,[a[1]||(a[1]=c("span",null,"by ",-1)),c("a",{href:(p=o.fund)==null?void 0:p.strategistUrl,target:"_blank",class:"strategist_url"},N((i=o.fund)==null?void 0:i.strategistName),9,bt)])):b("",!0)])):b("",!0)}}}),yt=V(xt,[["__scopeId","data-v-3d3fad46"]]),$t={key:0,class:"w-100"},kt={key:1,class:"w-100"},St={key:2,class:"w-100 d-flex justify-center"},wt={key:3,class:"d-flex flex-column h-100 align-center"},Ft=M({__name:"[fundSlug]",setup(k){var B;const o=Q(),a=ot(),v=rt(),_=X(),h=((B=_.path.split("/")[2])==null?void 0:B.split("-"))??[],p=h[0],i=h[1]??"",t=h[2]??"";tt(()=>{T(),x([])}),et(()=>{a.selectedFundAddress="",x([])});const s=g(()=>a.fund),e=st([]),x=l=>{e.value=l},T=async()=>{if(!t||!p){console.error("No fund address provided in the route.");return}try{await a.fetchFundData(p,t)}catch(l){console.error("Failed fetching fund -> ",l)}},O=g(()=>v.isActionState("fetchFundDataAction",ct.Loading));P(()=>o.connectedWallet,l=>{a.fetchUserFundData(p,t)}),P(()=>_.path,l=>{const u=`${r.value}`;(l===u||l===`${u}/nav`||l===`${u}/permissions`||l===`${u}/flows`||l===`${u}/governance`)&&x([])});const r=g(()=>`/details/${p}-${i}-${t}`),z=g(()=>{var u,y,$;return{title:((y=(u=s==null?void 0:s.value)==null?void 0:u.fundToken)==null?void 0:y.symbol)||"",to:(r==null?void 0:r.value)||"",photoUrl:(($=s==null?void 0:s.value)==null?void 0:$.photoUrl)||"",disabled:!1}}),I=[{to:r.value,exactMatch:!0,title:"Overview",text:""},{to:`${r.value}/governance`,exactMatch:!1,matchPrefix:`${r.value}/governance`,title:"Governance",text:""},{to:`${r.value}/nav`,exactMatch:!1,matchPrefix:`${r.value}/nav`,title:"NAV",text:""},{to:`${r.value}/permissions`,exactMatch:!0,title:"Permissions",text:""},{to:`${r.value}/flows`,exactMatch:!0,title:"Flows",text:""},{to:`${r.value}/execution-app`,exactMatch:!0,title:"Execution App",text:""}];return(l,u)=>{var C,U,D,E,H,L;const y=j,$=q,W=at;return n(O)?(d(),f("div",$t,[m(w,{type:"card"}),m(w,{type:"card"}),m(w,{type:"card"})])):(C=n(s))!=null&&C.address?(d(),f("div",kt,[m(y,{"fund-name":(U=n(s))==null?void 0:U.title,symbol:(E=(D=n(s))==null?void 0:D.fundToken)==null?void 0:E.symbol,description:(H=n(s))==null?void 0:H.description,"image-url":(L=n(s))==null?void 0:L.photoUrl},null,8,["fund-name","symbol","description","image-url"]),m(yt,{fund:n(s),"breadcrumb-items":n(e)},null,8,["fund","breadcrumb-items"]),n(e).length===0?(d(),F(pt,{key:0,routes:I,"fund-details-route":n(r)},null,8,["fund-details-route"])):b("",!0),n(e).length>0?(d(),F($,{key:1,items:n(e),class:"breadcrumbs","prepend-breadcrumb":n(z)},null,8,["items","prepend-breadcrumb"])):b("",!0),m(W,{fund:n(s),onUpdateBreadcrumbs:x},null,8,["fund"])])):n(o).isSwitchingNetworks?(d(),f("div",St,[m(nt,{indeterminate:""})])):(d(),f("div",wt,u[0]||(u[0]=[c("h2",{class:"mb-2"}," Oops, there was a problem loading the vault ",-1),c("p",{class:"text-center"},[S(" Network error occurred. "),c("br"),S(" Are you sure you are on the right network? "),c("br"),S(" Try switching to a different network. ")],-1)])))}}}),Tt=V(Ft,[["__scopeId","data-v-7c294156"]]);export{Tt as default};
